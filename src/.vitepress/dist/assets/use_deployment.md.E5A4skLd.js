import{_ as y}from"./chunks/NapCat.D0-8a759.js";import{_ as F,C as p,c,o as e,j as i,G as n,ar as l,b as r,a,w as h,as as d}from"./chunks/framework.DwOsETNj.js";const w=JSON.parse('{"title":"MaiCore Start éƒ¨ç½²æ•™ç¨‹","description":"","frontmatter":{},"headers":[],"relativePath":"use/deployment.md","filePath":"use/deployment.md","lastUpdated":1766413896000}'),u={name:"use/deployment.md"},C={class:"tip custom-block"},B={class:"tip custom-block"},q={class:"details custom-block"},A={class:"tip custom-block"},b={id:"top",tabindex:"-1"};function D(f,s,_,m,v,x){const g=p("NolebasePageProperties"),t=p("VPNolebaseInlineLinkPreview"),E=p("Mermaid"),k=p("NCard"),o=p("NolebaseGitChangelog");return e(),c("div",null,[s[36]||(s[36]=i("h1",{id:"maicore-start-éƒ¨ç½²æ•™ç¨‹",tabindex:"-1"},[a("MaiCore Start éƒ¨ç½²æ•™ç¨‹ "),i("a",{class:"header-anchor",href:"#maicore-start-éƒ¨ç½²æ•™ç¨‹","aria-label":'Permalink to "MaiCore Start éƒ¨ç½²æ•™ç¨‹"'},"â€‹")],-1)),n(g),s[37]||(s[37]=i("blockquote",null,[i("p",null,[i("strong",null,"æ¬¢è¿ä½¿ç”¨ MaiCore Startï¼"),a(" è¿™æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ï¼ˆæˆ‘çŒœæ˜¯çš„ï¼‰ Bot å®ä¾‹éƒ¨ç½²ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒ MaiBot å’Œ MoFox_bot çš„å®Œæ•´è‡ªåŠ¨åŒ–éƒ¨ç½²æµç¨‹ã€‚")])],-1)),i("div",C,[s[4]||(s[4]=i("p",{class:"custom-block-title"},"æ¸©é¦¨æç¤º",-1)),i("p",null,[s[2]||(s[2]=a("æœ¬æ•™ç¨‹å¯èƒ½æ¯”è¾ƒå¤æ‚ï¼Œæ¯ä¸ªæ­¥éª¤éƒ½æœ‰è¯¦ç»†è¯´æ˜ã€‚å¦‚æœæ‚¨é‡åˆ°é—®é¢˜ï¼Œè¯·ä»”ç»†é˜…è¯»å¯¹åº”çš„è§£å†³æ–¹æ¡ˆéƒ¨åˆ†ã€‚å¦‚æœæ‚¨åªæ˜¯æƒ³çŸ¥é“æ€ä¹ˆä½¿ç”¨ï¼Œå¯ä»¥é˜…è¯»",-1)),n(t,{href:"./use"},{default:h(()=>[...s[0]||(s[0]=[a("æ–°æ‰‹ä½¿ç”¨æŒ‡å—",-1)])]),_:1}),s[3]||(s[3]=a("ï¼Œæˆ–",-1)),n(t,{href:"./../function/instance_deployment"},{default:h(()=>[...s[1]||(s[1]=[a("å®ä¾‹éƒ¨ç½²è¾…åŠ©ç³»ç»Ÿ",-1)])]),_:1})])]),i("div",B,[s[8]||(s[8]=i("p",{class:"custom-block-title"},"å…³äºWindowsé€šçŸ¥",-1)),i("p",null,[s[6]||(s[6]=a("ç”±äº GitHub æœåŠ¡å™¨åœ¨å¢ƒå¤–ï¼Œæ‰€ä»¥åœ¨æ²¡æœ‰ä»£ç†è½¯ä»¶æ—¶ï¼Œéƒ¨ç½²å¯èƒ½ä¼šååˆ†ç¼“æ…¢ï¼Œä¸ºäº†ç…§é¡¾æ²¡æœ‰ä»£ç†è½¯ä»¶çš„ç”¨æˆ·ï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ä¸ª Windows é€šçŸ¥åŠŸèƒ½ï¼Œå½“ç¼“æ…¢çš„éƒ¨ç½²æµç¨‹ç»“æŸï¼Œæˆ–å‡ºç°ä»»ä½•æ„å¤–æƒ…å†µã€éœ€è¦æ‚¨åšå‡ºé€‰æ‹©æ—¶ï¼Œæˆ‘ä»¬ä¼šå‘Windowsé€šçŸ¥ä¸­å¿ƒå‘é€é€šçŸ¥ä»¥æé†’æ‚¨ï¼Œè¿™æ ·æ‚¨æ—¢å¯ä»¥åœ¨éƒ¨ç½²æœŸé—´åšæ‚¨çš„å…¶ä»–äº‹æƒ…ï¼Œä¹Ÿä¸ä¼šé”™è¿‡ä»»ä½•é‡è¦ä¿¡æ¯ã€‚è¿™ä¸ªåŠŸèƒ½æ‚¨å¯ä»¥åœ¨",-1)),n(t,{href:"./../function/miscellaneous/settings#Windowsé€šçŸ¥"},{default:h(()=>[...s[5]||(s[5]=[a("ç¨‹åºè®¾ç½®",-1)])]),_:1}),s[7]||(s[7]=a("ä¸­å…³é—­ã€‚",-1))])]),s[38]||(s[38]=i("h2",{id:"ğŸ“‹-ç›®å½•",tabindex:"-1"},[a("ğŸ“‹ ç›®å½• "),i("a",{class:"header-anchor",href:"#ğŸ“‹-ç›®å½•","aria-label":'Permalink to "ğŸ“‹ ç›®å½•"'},"â€‹")],-1)),i("ul",null,[i("li",null,[n(t,{href:"#ç³»ç»Ÿè¦æ±‚"},{default:h(()=>[...s[9]||(s[9]=[a("ç³»ç»Ÿè¦æ±‚",-1)])]),_:1})]),i("li",null,[n(t,{href:"#å¿«é€Ÿå¼€å§‹"},{default:h(()=>[...s[10]||(s[10]=[a("å¿«é€Ÿå¼€å§‹",-1)])]),_:1})]),i("li",null,[n(t,{href:"#éƒ¨ç½²æ¶æ„è®¾è®¡"},{default:h(()=>[...s[11]||(s[11]=[a("éƒ¨ç½²æ¶æ„è®¾è®¡",-1)])]),_:1})]),i("li",null,[n(t,{href:"#è¯¦ç»†éƒ¨ç½²æµç¨‹"},{default:h(()=>[...s[12]||(s[12]=[a("è¯¦ç»†éƒ¨ç½²æµç¨‹",-1)])]),_:1})]),i("li",null,[n(t,{href:"#maibot-éƒ¨ç½²æŒ‡å—"},{default:h(()=>[...s[13]||(s[13]=[a("MaiBot éƒ¨ç½²æŒ‡å—",-1)])]),_:1})]),i("li",null,[n(t,{href:"#mofox_bot-éƒ¨ç½²æŒ‡å—"},{default:h(()=>[...s[14]||(s[14]=[a("MoFox_bot éƒ¨ç½²æŒ‡å—",-1)])]),_:1})]),i("li",null,[n(t,{href:"#æ ¸å¿ƒç»„ä»¶è¯¦è§£"},{default:h(()=>[...s[15]||(s[15]=[a("æ ¸å¿ƒç»„ä»¶è¯¦è§£",-1)])]),_:1})]),i("li",null,[n(t,{href:"#é…ç½®æ–‡ä»¶è¯´æ˜"},{default:h(()=>[...s[16]||(s[16]=[a("é…ç½®æ–‡ä»¶è¯´æ˜",-1)])]),_:1})]),i("li",null,[n(t,{href:"#å¸¸è§é—®é¢˜è§£å†³"},{default:h(()=>[...s[17]||(s[17]=[a("å¸¸è§é—®é¢˜è§£å†³",-1)])]),_:1})]),i("li",null,[n(t,{href:"#é«˜çº§é…ç½®"},{default:h(()=>[...s[18]||(s[18]=[a("é«˜çº§é…ç½®",-1)])]),_:1})])]),s[39]||(s[39]=l(`<h2 id="ğŸ–¥ï¸-ç³»ç»Ÿè¦æ±‚" tabindex="-1">ğŸ–¥ï¸ ç³»ç»Ÿè¦æ±‚ <a class="header-anchor" href="#ğŸ–¥ï¸-ç³»ç»Ÿè¦æ±‚" aria-label="Permalink to &quot;ğŸ–¥ï¸ ç³»ç»Ÿè¦æ±‚&quot;">â€‹</a></h2><div class="info custom-block"><p class="custom-block-title">ç³»ç»Ÿè¦æ±‚</p><p>åœ¨å¼€å§‹éƒ¨ç½²ä¹‹å‰ï¼Œè¯·ç¡®ä¿æ‚¨çš„ç³»ç»Ÿæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š</p></div><h3 id="åŸºç¡€è¦æ±‚" tabindex="-1">åŸºç¡€è¦æ±‚ <a class="header-anchor" href="#åŸºç¡€è¦æ±‚" aria-label="Permalink to &quot;åŸºç¡€è¦æ±‚&quot;">â€‹</a></h3><ul><li><strong>æ“ä½œç³»ç»Ÿ</strong>: Windows 10/11 (64ä½)</li><li><strong>å†…å­˜</strong>: è‡³å°‘ 2GB RAM (æ¨è 8GB æˆ–æ›´å¤š)</li><li><strong>å­˜å‚¨ç©ºé—´</strong>: è‡³å°‘ 10GB å¯ç”¨ç©ºé—´</li><li><strong>ç½‘ç»œ</strong>: ç¨³å®šçš„äº’è”ç½‘è¿æ¥</li></ul><h3 id="è½¯ä»¶ä¾èµ–" tabindex="-1">è½¯ä»¶ä¾èµ– <a class="header-anchor" href="#è½¯ä»¶ä¾èµ–" aria-label="Permalink to &quot;è½¯ä»¶ä¾èµ–&quot;">â€‹</a></h3><ul><li><strong>Python</strong>: 3.8 æˆ–æ›´é«˜ç‰ˆæœ¬ (ç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹)</li><li><strong>Git</strong>: ç”¨äºä¸‹è½½æºç  (å¯é€‰ï¼Œç³»ç»Ÿä¼šå¤„ç†)</li><li><strong>Node.js</strong>: ä»…åœ¨å®‰è£… WebUI æ—¶éœ€è¦ (ç³»ç»Ÿä¼šè‡ªåŠ¨å®‰è£…)</li></ul><div class="warning custom-block"><p class="custom-block-title">é‡è¦æé†’</p><ul><li>ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´ï¼Œéƒ¨ç½²è¿‡ç¨‹ä¼šä¸‹è½½å¤šä¸ªç»„ä»¶</li><li>ç½‘ç»œè¿æ¥å¿…é¡»ç¨³å®šï¼Œå¦åˆ™å¯èƒ½å¯¼è‡´ä¸‹è½½å¤±è´¥</li><li>å»ºè®®å…³é—­æ€æ¯’è½¯ä»¶çš„å®æ—¶ä¿æŠ¤ï¼Œé¿å…è¯¯åˆ æ–‡ä»¶</li></ul></div><h3 id="å¿«é€Ÿéƒ¨ç½²æµç¨‹" tabindex="-1">å¿«é€Ÿéƒ¨ç½²æµç¨‹ <a class="header-anchor" href="#å¿«é€Ÿéƒ¨ç½²æµç¨‹" aria-label="Permalink to &quot;å¿«é€Ÿéƒ¨ç½²æµç¨‹&quot;">â€‹</a></h3><h4 id="ç¬¬ä¸€æ­¥-å¯åŠ¨éƒ¨ç½²ç¨‹åº" tabindex="-1">ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨éƒ¨ç½²ç¨‹åº <a class="header-anchor" href="#ç¬¬ä¸€æ­¥-å¯åŠ¨éƒ¨ç½²ç¨‹åº" aria-label="Permalink to &quot;ç¬¬ä¸€æ­¥ï¼šå¯åŠ¨éƒ¨ç½²ç¨‹åº&quot;">â€‹</a></h4><ol><li>åŒå‡»è¿è¡Œ <code>MaiCoreStart.exe</code></li><li>ç­‰å¾…ç³»ç»Ÿåˆå§‹åŒ–å®Œæˆ</li><li>åœ¨ä¸»èœå•ä¸­é€‰æ‹© <strong>[1] éƒ¨ç½²æ–°å®ä¾‹</strong></li></ol><h4 id="ç¬¬äºŒæ­¥-é€‰æ‹©-bot-ç±»å‹" tabindex="-1">ç¬¬äºŒæ­¥ï¼šé€‰æ‹© Bot ç±»å‹ <a class="header-anchor" href="#ç¬¬äºŒæ­¥-é€‰æ‹©-bot-ç±»å‹" aria-label="Permalink to &quot;ç¬¬äºŒæ­¥ï¼šé€‰æ‹© Bot ç±»å‹&quot;">â€‹</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ğŸ¤–</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Botç±»å‹é€‰æ‹©</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">è¯·é€‰æ‹©è¦éƒ¨ç½²çš„Botç±»å‹ï¼š</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [1] </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MaiBot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (é»˜è®¤)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [2] </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MoFox_bot</span></span></code></pre></div><ul><li><strong>æ–°æ‰‹æ¨è</strong>: é€‰æ‹© <code>1</code> (MaiBot)ï¼Œç”Ÿæ€å®Œå–„</li><li><strong>é«˜çº§ç”¨æˆ·</strong>: é€‰æ‹© <code>2</code> (MoFox_bot)ï¼Œæ€§èƒ½ä¼˜å¼‚</li></ul><h4 id="ç¬¬ä¸‰æ­¥-ç‰ˆæœ¬é€‰æ‹©" tabindex="-1">ç¬¬ä¸‰æ­¥ï¼šç‰ˆæœ¬é€‰æ‹© <a class="header-anchor" href="#ç¬¬ä¸‰æ­¥-ç‰ˆæœ¬é€‰æ‹©" aria-label="Permalink to &quot;ç¬¬ä¸‰æ­¥ï¼šç‰ˆæœ¬é€‰æ‹©&quot;">â€‹</a></h4><p>ç³»ç»Ÿé€šè¿‡ GitHub API è‡ªåŠ¨è·å–æœ€æ–°ç‰ˆæœ¬ï¼š</p><ul><li><strong>ç¨³å®šç‰ˆæœ¬</strong>: æ¨èé€‰æ‹©æœ€æ–°çš„ release ç‰ˆæœ¬</li><li><strong>å¼€å‘ç‰ˆæœ¬</strong>: <code>main</code> åˆ†æ”¯ï¼ˆæœ€æ–°åŠŸèƒ½ï¼Œå¯èƒ½ä¸ç¨³å®šï¼‰</li></ul><h4 id="ç¬¬å››æ­¥-ç»„ä»¶é€‰æ‹©" tabindex="-1">ç¬¬å››æ­¥ï¼šç»„ä»¶é€‰æ‹© <a class="header-anchor" href="#ç¬¬å››æ­¥-ç»„ä»¶é€‰æ‹©" aria-label="Permalink to &quot;ç¬¬å››æ­¥ï¼šç»„ä»¶é€‰æ‹©&quot;">â€‹</a></h4><p>æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©å®‰è£…ç»„ä»¶ï¼š</p><ul><li><strong>é€‚é…å™¨</strong>: å¿…è£…ï¼ˆè¿æ¥ QQ åè®®ç«¯ï¼‰</li><li><strong>NapCat</strong>: å¿…è£…ï¼ˆQQ åè®®å®ç°ï¼‰</li><li><strong>MongoDB</strong>: å¯é€‰ï¼ˆæ ¹æ® Bot ç‰ˆæœ¬å†³å®šï¼‰</li><li><strong>WebUI</strong>: æ¨èï¼ˆç½‘é¡µç®¡ç†ç•Œé¢ï¼‰</li></ul><h2 id="ğŸ—ï¸-éƒ¨ç½²æ¶æ„è®¾è®¡" tabindex="-1">ğŸ—ï¸ éƒ¨ç½²æ¶æ„è®¾è®¡ <a class="header-anchor" href="#ğŸ—ï¸-éƒ¨ç½²æ¶æ„è®¾è®¡" aria-label="Permalink to &quot;ğŸ—ï¸ éƒ¨ç½²æ¶æ„è®¾è®¡&quot;">â€‹</a></h2><h3 id="ç³»ç»Ÿæ¶æ„å›¾" tabindex="-1">ç³»ç»Ÿæ¶æ„å›¾ <a class="header-anchor" href="#ç³»ç»Ÿæ¶æ„å›¾" aria-label="Permalink to &quot;ç³»ç»Ÿæ¶æ„å›¾&quot;">â€‹</a></h3>`,21)),(e(),r(d,null,{default:h(()=>[n(E,{id:"mermaid-238",class:"mermaid my-class",graph:"graph%20TB%0A%20%20%20%20A%5BMaiCore%20Start%20%E9%83%A8%E7%BD%B2%E7%B3%BB%E7%BB%9F%5D%20--%3E%20B%5BDeploymentManager%5D%0A%20%20%20%20B%20--%3E%20C%5BMaiBotDeployer%5D%0A%20%20%20%20B%20--%3E%20D%5BMoFoxBotDeployer%5D%0A%20%20%20%20B%20--%3E%20E%5BNapCatDeployer%5D%0A%20%20%20%20%0A%20%20%20%20C%20--%3E%20F%5BVersionManager%5D%0A%20%20%20%20C%20--%3E%20G%5BBaseDeployer%5D%0A%20%20%20%20D%20--%3E%20H%5BVersionManager%5D%0A%20%20%20%20D%20--%3E%20G%0A%20%20%20%20%0A%20%20%20%20G%20--%3E%20I%5B%E7%BD%91%E7%BB%9C%E6%A3%80%E6%9F%A5%5D%0A%20%20%20%20G%20--%3E%20J%5B%E6%96%87%E4%BB%B6%E4%B8%8B%E8%BD%BD%5D%0A%20%20%20%20G%20--%3E%20K%5B%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE%5D%0A%20%20%20%20G%20--%3E%20L%5B%E4%BE%9D%E8%B5%96%E5%AE%89%E8%A3%85%5D%0A%20%20%20%20%0A%20%20%20%20I%20--%3E%20M%5BGitHub%20API%5D%0A%20%20%20%20J%20--%3E%20N%5BPyPI%E9%95%9C%E5%83%8F%5D%0A%20%20%20%20K%20--%3E%20O%5B%E8%99%9A%E6%8B%9F%E7%8E%AF%E5%A2%83%5D%0A%20%20%20%20L%20--%3E%20P%5Brequirements.txt%5D%0A"})]),fallback:h(()=>[...s[19]||(s[19]=[a(" Loading... ",-1)])]),_:1})),s[40]||(s[40]=l(`<h3 id="æ ¸å¿ƒè®¾è®¡æ¨¡å¼" tabindex="-1">æ ¸å¿ƒè®¾è®¡æ¨¡å¼ <a class="header-anchor" href="#æ ¸å¿ƒè®¾è®¡æ¨¡å¼" aria-label="Permalink to &quot;æ ¸å¿ƒè®¾è®¡æ¨¡å¼&quot;">â€‹</a></h3><p>MaiCore Start é‡‡ç”¨<mark>æ¨¡å—åŒ–éƒ¨ç½²æ¶æ„</mark>ï¼Œé€šè¿‡ç­–ç•¥æ¨¡å¼å®ç°ä¸åŒ Bot ç±»å‹çš„å·®å¼‚åŒ–éƒ¨ç½²ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># éƒ¨ç½²ç®¡ç†å™¨æ ¸å¿ƒå®ç°</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DeploymentManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;éƒ¨ç½²ç®¡ç†å™¨ - åè°ƒå„ä¸ªéƒ¨ç½²å™¨å®Œæˆéƒ¨ç½²ä»»åŠ¡&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # åˆå§‹åŒ–å„ä¸ªéƒ¨ç½²å™¨</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.maibot_deployer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MaiBotDeployer()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.mofox_deployer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> MoFoxBotDeployer()</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.napcat_deployer </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NapCatDeployer()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # ç¦»çº¿æ¨¡å¼æ ‡å¿—</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._offline_mode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> deploy_instance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;éƒ¨ç½²æ–°å®ä¾‹ - é‡æ„ç‰ˆæœ¬&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # ç½‘ç»œæ£€æŸ¥</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._check_network_for_deployment():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # è·å–éƒ¨ç½²é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        deploy_config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._get_deployment_config()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> deploy_config:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # ç¡®è®¤é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._confirm_deployment(deploy_config):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # æ‰§è¡Œéƒ¨ç½²æµç¨‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        paths </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._run_deployment_steps(deploy_config)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # å®Œæˆéƒ¨ç½²</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._finalize_deployment(deploy_config, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">**</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">paths)</span></span></code></pre></div><h2 id="ğŸ“–-è¯¦ç»†éƒ¨ç½²æµç¨‹" tabindex="-1">ğŸ“– è¯¦ç»†éƒ¨ç½²æµç¨‹ <a class="header-anchor" href="#ğŸ“–-è¯¦ç»†éƒ¨ç½²æµç¨‹" aria-label="Permalink to &quot;ğŸ“– è¯¦ç»†éƒ¨ç½²æµç¨‹&quot;">â€‹</a></h2><h3 id="éƒ¨ç½²æµç¨‹å›¾" tabindex="-1">éƒ¨ç½²æµç¨‹å›¾ <a class="header-anchor" href="#éƒ¨ç½²æµç¨‹å›¾" aria-label="Permalink to &quot;éƒ¨ç½²æµç¨‹å›¾&quot;">â€‹</a></h3>`,5)),i("details",q,[s[21]||(s[21]=i("summary",null,"ç‚¹å‡»å±•å¼€è¯¦ç»†æµç¨‹",-1)),(e(),r(d,null,{default:h(()=>[n(E,{id:"mermaid-253",class:"mermaid my-class",graph:"graph%20TD%0A%20%20%20%20A%5B%E5%90%AF%E5%8A%A8%E9%83%A8%E7%BD%B2%E7%A8%8B%E5%BA%8F%5D%20--%3E%20B%5B%E7%BD%91%E7%BB%9C%E8%BF%9E%E6%8E%A5%E6%A3%80%E6%9F%A5%5D%0A%20%20%20%20B%20--%3E%20C%5BBot%E7%B1%BB%E5%9E%8B%E9%80%89%E6%8B%A9%5D%0A%20%20%20%20C%20--%3E%20D%5B%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86%E5%99%A8%E8%8E%B7%E5%8F%96%5D%0A%20%20%20%20D%20--%3E%20E%5B%E7%89%88%E6%9C%AC%E9%80%89%E6%8B%A9%E7%95%8C%E9%9D%A2%5D%0A%20%20%20%20E%20--%3E%20F%5B%E7%BB%84%E4%BB%B6%E5%AE%89%E8%A3%85%E9%80%89%E9%A1%B9%5D%0A%20%20%20%20F%20--%3E%20G%5B%E5%AE%89%E8%A3%85%E8%B7%AF%E5%BE%84%E9%85%8D%E7%BD%AE%5D%0A%20%20%20%20G%20--%3E%20H%5B%E5%AE%9E%E4%BE%8B%E5%91%BD%E5%90%8D%5D%0A%20%20%20%20H%20--%3E%20I%5B%E5%BA%8F%E5%88%97%E5%8F%B7%E7%94%9F%E6%88%90%5D%0A%20%20%20%20I%20--%3E%20J%5B%E9%85%8D%E7%BD%AE%E7%A1%AE%E8%AE%A4%5D%0A%20%20%20%20J%20--%3E%20K%5B%E5%BC%80%E5%A7%8B%E9%83%A8%E7%BD%B2%E6%B5%81%E7%A8%8B%5D%0A%20%20%20%20%0A%20%20%20%20K%20--%3E%20L%5BBot%E4%B8%BB%E4%BD%93%E5%AE%89%E8%A3%85%5D%0A%20%20%20%20L%20--%3E%20M%5B%E9%80%82%E9%85%8D%E5%99%A8%E5%AE%89%E8%A3%85%5D%0A%20%20%20%20M%20--%3E%20N%5BNapCat%E5%AE%89%E8%A3%85%5D%0A%20%20%20%20N%20--%3E%20O%5BWebUI%E5%AE%89%E8%A3%85%5D%0A%20%20%20%20O%20--%3E%20P%5BPython%E7%8E%AF%E5%A2%83%E8%AE%BE%E7%BD%AE%5D%0A%20%20%20%20P%20--%3E%20Q%5B%E4%BE%9D%E8%B5%96%E5%8C%85%E5%AE%89%E8%A3%85%5D%0A%20%20%20%20Q%20--%3E%20R%5B%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%94%9F%E6%88%90%5D%0A%20%20%20%20R%20--%3E%20S%5B%E5%AE%9E%E4%BE%8B%E9%85%8D%E7%BD%AE%E4%BF%9D%E5%AD%98%5D%0A%20%20%20%20S%20--%3E%20T%5B%E9%83%A8%E7%BD%B2%E5%AE%8C%E6%88%90%5D%0A"})]),fallback:h(()=>[...s[20]||(s[20]=[a(" Loading... ",-1)])]),_:1}))]),s[41]||(s[41]=l(`<h3 id="æ ¸å¿ƒæ­¥éª¤è¯¦è§£" tabindex="-1">æ ¸å¿ƒæ­¥éª¤è¯¦è§£ <a class="header-anchor" href="#æ ¸å¿ƒæ­¥éª¤è¯¦è§£" aria-label="Permalink to &quot;æ ¸å¿ƒæ­¥éª¤è¯¦è§£&quot;">â€‹</a></h3><h4 id="_1-ç½‘ç»œè¿æ¥æ£€æŸ¥-ğŸ”" tabindex="-1">1. ç½‘ç»œè¿æ¥æ£€æŸ¥ ğŸ” <a class="header-anchor" href="#_1-ç½‘ç»œè¿æ¥æ£€æŸ¥-ğŸ”" aria-label="Permalink to &quot;1. ç½‘ç»œè¿æ¥æ£€æŸ¥ ğŸ”&quot;">â€‹</a></h4><p>ç³»ç»Ÿé€šè¿‡å¤šendpointæ£€æµ‹ç½‘ç»œçŠ¶æ€ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> check_network_connection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self) -&gt; Tuple[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;æ£€æŸ¥ç½‘ç»œè¿æ¥çŠ¶æ€&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    endpoints </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://api.github.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;GitHub API&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://github.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;GitHub&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://pypi.tuna.tsinghua.edu.cn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ¸…åPyPIé•œåƒ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url, name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> endpoints:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requests.get(url, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">timeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.status_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">301</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">302</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            continue</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ— æ³•è¿æ¥åˆ°GitHubå’ŒPyPIé•œåƒç«™ç‚¹&quot;</span></span></code></pre></div><ul><li><strong>âœ… ç½‘ç»œæ­£å¸¸</strong>: è·å–æœ€æ–°ç‰ˆæœ¬ä¿¡æ¯</li><li><strong>âŒ ç½‘ç»œå¼‚å¸¸</strong>: å¯ç”¨ç¦»çº¿æ¨¡å¼ï¼Œä½¿ç”¨ç¼“å­˜ç‰ˆæœ¬</li></ul><div class="warning custom-block"><p class="custom-block-title">ç½‘ç»œé—®é¢˜å¤„ç†</p><p>å¦‚æœç½‘ç»œæ£€æŸ¥å¤±è´¥ï¼Œç³»ç»Ÿæä¾›ä»¥ä¸‹è§£å†³æ–¹æ¡ˆï¼š</p><ol><li><strong>ç­‰å¾…é‡è¯•</strong>: GitHub API é€Ÿç‡é™åˆ¶é€šå¸¸åœ¨ 10 ç§’å†…æ¢å¤</li><li><strong>ç½‘ç»œè¯Šæ–­</strong>: æ£€æŸ¥ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™è®¾ç½®</li><li><strong>ä»£ç†é…ç½®</strong>: é…ç½®ä¼ä¸šä»£ç†æˆ–ä½¿ç”¨æ‰‹æœºçƒ­ç‚¹</li><li><strong>ç¦»çº¿æ¨¡å¼</strong>: ä½¿ç”¨æœ¬åœ°ç¼“å­˜ç»§ç»­éƒ¨ç½²</li></ol></div><h4 id="_2-bot-ç±»å‹é€‰æ‹©-ğŸ¤–" tabindex="-1">2. Bot ç±»å‹é€‰æ‹© ğŸ¤– <a class="header-anchor" href="#_2-bot-ç±»å‹é€‰æ‹©-ğŸ¤–" aria-label="Permalink to &quot;2. Bot ç±»å‹é€‰æ‹© ğŸ¤–&quot;">â€‹</a></h4><p><strong>MaiBot æ¶æ„ç‰¹ç‚¹</strong>:</p><ul><li><strong>æˆç†Ÿç”Ÿæ€</strong>: ä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€å’Œç¤¾åŒºæ”¯æŒ</li><li><strong>ç‰ˆæœ¬å…¼å®¹</strong>: æ”¯æŒä» classical åˆ°æœ€æ–°ç‰ˆæœ¬çš„å¹³æ»‘å‡çº§</li><li><strong>é…ç½®çµæ´»</strong>: é€‚é…ä¸åŒç‰ˆæœ¬éœ€æ±‚çš„ç»„ä»¶é…ç½®</li></ul><p><strong>MoFox_bot æ¶æ„ç‰¹ç‚¹</strong>:</p><ul><li><strong>é«˜æ€§èƒ½è®¾è®¡</strong>: å†…ç½®é€‚é…å™¨ï¼Œå‡å°‘å¤–éƒ¨ä¾èµ–</li><li><strong>æ¨¡å—åŒ–æ¶æ„</strong>: æ’ä»¶åŒ–è®¾è®¡ï¼ŒåŠŸèƒ½æ‰©å±•æ€§å¼º</li><li><strong>éƒ¨ç½²ç®€åŒ–</strong>: ä¸€ä½“åŒ–éƒ¨ç½²æµç¨‹</li></ul><h4 id="_3-ç‰ˆæœ¬é€‰æ‹©ç³»ç»Ÿ-ğŸ“¦" tabindex="-1">3. ç‰ˆæœ¬é€‰æ‹©ç³»ç»Ÿ ğŸ“¦ <a class="header-anchor" href="#_3-ç‰ˆæœ¬é€‰æ‹©ç³»ç»Ÿ-ğŸ“¦" aria-label="Permalink to &quot;3. ç‰ˆæœ¬é€‰æ‹©ç³»ç»Ÿ ğŸ“¦&quot;">â€‹</a></h4><p>ç‰ˆæœ¬ç®¡ç†é€šè¿‡ <code>VersionManager</code> å®ç°æ™ºèƒ½ç‰ˆæœ¬æ§åˆ¶ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> VersionManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;ç‰ˆæœ¬ç®¡ç†å™¨ - è´Ÿè´£è·å–å’Œç®¡ç†Botç‰ˆæœ¬ä¿¡æ¯&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_versions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, force_refresh: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; List[Dict]:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;è·å–ç‰ˆæœ¬åˆ—è¡¨ï¼ˆåŒ…æ‹¬releaseså’Œåˆ†æ”¯ï¼‰&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> force_refresh </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">and</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._is_cache_valid():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._versions_cache</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        versions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # è·å–releases</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        releases </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.get_github_releases(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">include_prerelease</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> release </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> releases:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            version_info </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: release.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tag_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &quot;display_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: release.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, release.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tag_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;release&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &quot;download_url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://codeload.github.com/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.repo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/zip/refs/tags/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">release.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;tag_name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &quot;changelog&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: release.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;body&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æš‚æ— æ›´æ–°æ—¥å¿—&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            versions.append(version_info)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # è·å–åˆ†æ”¯</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        branches </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.get_github_branches()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> branch </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> branches:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> branch.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.supported_branches:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                version_info </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: branch.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    &quot;display_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">branch.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">åˆ†æ”¯&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;branch&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    &quot;download_url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://codeload.github.com/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.repo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/zip/refs/heads/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">branch.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;name&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    &quot;changelog&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;åˆ†æ”¯æ— å›ºå®šæ›´æ–°æ—¥å¿—&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                versions.append(version_info)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._prioritize_versions(versions)</span></span></code></pre></div><p><strong>ç‰ˆæœ¬ç±»å‹è¯´æ˜</strong>:</p><ul><li><strong>Release ç‰ˆæœ¬</strong>: ç»è¿‡å……åˆ†æµ‹è¯•çš„ç¨³å®šç‰ˆæœ¬</li><li><strong>Main åˆ†æ”¯</strong>: æœ€æ–°å¼€å‘ç‰ˆæœ¬ï¼ŒåŒ…å«æœ€æ–°åŠŸèƒ½</li><li><strong>Dev åˆ†æ”¯</strong>: å¼€å‘ç‰ˆæœ¬ï¼ŒåŒ…å«å®éªŒæ€§åŠŸèƒ½</li></ul><h4 id="_4-æ™ºèƒ½ç»„ä»¶é€‰æ‹©-ğŸ”§" tabindex="-1">4. æ™ºèƒ½ç»„ä»¶é€‰æ‹© ğŸ”§ <a class="header-anchor" href="#_4-æ™ºèƒ½ç»„ä»¶é€‰æ‹©-ğŸ”§" aria-label="Permalink to &quot;4. æ™ºèƒ½ç»„ä»¶é€‰æ‹© ğŸ”§&quot;">â€‹</a></h4><p>ç³»ç»Ÿæ ¹æ® Bot ç±»å‹å’Œç‰ˆæœ¬è‡ªåŠ¨åˆ¤æ–­ç»„ä»¶éœ€æ±‚ï¼š</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_version_requirements</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(version: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; Dict[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Any]:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;æ ¹æ®ç‰ˆæœ¬è·å–å®Œæ•´çš„éœ€æ±‚é…ç½®&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;is_legacy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: is_legacy_version(version),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;needs_mongodb&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: needs_mongodb(version),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;needs_adapter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: needs_adapter(version),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;adapter_version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: get_adapter_version(version),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;parsed_version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: parse_version(version)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> is_legacy_version</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(version: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;æ£€æµ‹æ˜¯å¦ä¸ºæ—§ç‰ˆæœ¬ï¼ˆå°äº0.6.0æˆ–ä¸ºclassicalï¼‰&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> version </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;classical&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        version_parts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> version.split(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(version_parts) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            major </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(version_parts[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            minor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(version_parts[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> major </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> or</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (major </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> and</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> minor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 6</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    except</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ValueError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">IndexError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span></code></pre></div><p><strong>ç»„ä»¶é€‰æ‹©ç­–ç•¥</strong>:</p><ul><li><strong>é€‚é…å™¨</strong>: æ ¹æ®ç‰ˆæœ¬è‡ªåŠ¨é€‰æ‹©å…¼å®¹ç‰ˆæœ¬ <ul><li>0.6.x â†’ 0.2.3</li><li>0.7.x-0.8.x â†’ 0.4.2</li><li>0.9.x+ â†’ main åˆ†æ”¯</li></ul></li><li><strong>NapCat</strong>: æä¾›å¤šç§ç‰ˆæœ¬é€‰æ‹©ï¼ˆShell/Framework/OneKeyï¼‰</li><li><strong>MongoDB</strong>: æ—§ç‰ˆæœ¬éœ€è¦ï¼Œæ–°ç‰ˆæœ¬å¯é€‰</li><li><strong>WebUI</strong>: æ ¹æ® Bot ç±»å‹æä¾›ä¸åŒç•Œé¢</li></ul><hr><h2 id="ğŸ¤–-maibot-éƒ¨ç½²æŒ‡å—" tabindex="-1">ğŸ¤– MaiBot éƒ¨ç½²æŒ‡å— <a class="header-anchor" href="#ğŸ¤–-maibot-éƒ¨ç½²æŒ‡å—" aria-label="Permalink to &quot;ğŸ¤– MaiBot éƒ¨ç½²æŒ‡å—&quot;">â€‹</a></h2><h3 id="maibot-ç®€ä»‹" tabindex="-1">MaiBot ç®€ä»‹ <a class="header-anchor" href="#maibot-ç®€ä»‹" aria-label="Permalink to &quot;MaiBot ç®€ä»‹&quot;">â€‹</a></h3><p>MaiBot æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”ç¨³å®šçš„ QQ æœºå™¨äººæ¡†æ¶ï¼Œæ‹¥æœ‰ä¸°å¯Œçš„æ’ä»¶ç”Ÿæ€å’Œå®Œå–„çš„æ–‡æ¡£æ”¯æŒã€‚</p><h3 id="éƒ¨ç½²æ­¥éª¤" tabindex="-1">éƒ¨ç½²æ­¥éª¤ <a class="header-anchor" href="#éƒ¨ç½²æ­¥éª¤" aria-label="Permalink to &quot;éƒ¨ç½²æ­¥éª¤&quot;">â€‹</a></h3><h4 id="æ­¥éª¤-1-é€‰æ‹©-maibot" tabindex="-1">æ­¥éª¤ 1: é€‰æ‹© MaiBot <a class="header-anchor" href="#æ­¥éª¤-1-é€‰æ‹©-maibot" aria-label="Permalink to &quot;æ­¥éª¤ 1: é€‰æ‹© MaiBot&quot;">â€‹</a></h4><p>åœ¨ Bot ç±»å‹é€‰æ‹©æ—¶è¾“å…¥ <code>1</code> æˆ–ç›´æ¥å›è½¦ï¼ˆé»˜è®¤ï¼‰</p><h4 id="æ­¥éª¤-2-ç‰ˆæœ¬é€‰æ‹©" tabindex="-1">æ­¥éª¤ 2: ç‰ˆæœ¬é€‰æ‹© <a class="header-anchor" href="#æ­¥éª¤-2-ç‰ˆæœ¬é€‰æ‹©" aria-label="Permalink to &quot;æ­¥éª¤ 2: ç‰ˆæœ¬é€‰æ‹©&quot;">â€‹</a></h4><p>MaiBot ç‰ˆæœ¬é€‰æ‹©ç•Œé¢ï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>ğŸš€ é€‰æ‹©éƒ¨ç½²ç‰ˆæœ¬ - MaiBot</span></span>
<span class="line"><span>â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”</span></span>
<span class="line"><span>â”‚é€‰é¡¹ â”‚ ç‰ˆæœ¬              â”‚ ç±»å‹   â”‚ è¯´æ˜                               â”‚ å‘å¸ƒæ—¶é—´   â”‚</span></span>
<span class="line"><span>â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤</span></span>
<span class="line"><span>â”‚ [1] â”‚ v0.11.6          â”‚ å‘è¡Œç‰ˆ â”‚ æœ€æ–°ç¨³å®šç‰ˆæœ¬                        â”‚ 2024-12-01 â”‚</span></span>
<span class="line"><span>â”‚ [2] â”‚ mainåˆ†æ”¯         â”‚ åˆ†æ”¯   â”‚ æœ€æ–°å¼€å‘ç‰ˆæœ¬                        â”‚ -          â”‚</span></span>
<span class="line"><span>â”‚ [3] â”‚ v0.9.8           â”‚ å‘è¡Œç‰ˆ â”‚ ç¨³å®šç‰ˆæœ¬                            â”‚ 2024-11-15 â”‚</span></span>
<span class="line"><span>â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[C] æŸ¥çœ‹ç‰ˆæœ¬æ›´æ–°æ—¥å¿—  [R] åˆ·æ–°ç‰ˆæœ¬åˆ—è¡¨  [Q] è¿”å›ä¸Šçº§èœå•</span></span></code></pre></div><p><strong>æ¨èé€‰æ‹©</strong>:</p><ul><li><strong>æ–°æ‰‹</strong>: <code>v0.11.6</code> (æœ€æ–°ç¨³å®šç‰ˆ)</li><li><strong>å¼€å‘è€…</strong>: <code>mainåˆ†æ”¯</code> (æœ€æ–°åŠŸèƒ½)</li></ul><h4 id="æ­¥éª¤-3-é€‚é…å™¨å®‰è£…" tabindex="-1">æ­¥éª¤ 3: é€‚é…å™¨å®‰è£… <a class="header-anchor" href="#æ­¥éª¤-3-é€‚é…å™¨å®‰è£…" aria-label="Permalink to &quot;æ­¥éª¤ 3: é€‚é…å™¨å®‰è£…&quot;">â€‹</a></h4><p>ç³»ç»Ÿä¼šæ ¹æ®ç‰ˆæœ¬è‡ªåŠ¨é€‰æ‹©é€‚é…å™¨ï¼š</p><ul><li><strong>0.5.x åŠä»¥ä¸‹</strong>: æ— éœ€é€‚é…å™¨</li><li><strong>0.6.x</strong>: ä½¿ç”¨ 0.2.3 ç‰ˆæœ¬é€‚é…å™¨</li><li><strong>0.7.x-0.8.x</strong>: ä½¿ç”¨ 0.4.2 ç‰ˆæœ¬é€‚é…å™¨</li><li><strong>main/dev åˆ†æ”¯</strong>: ä½¿ç”¨å¯¹åº”åˆ†æ”¯é€‚é…å™¨</li></ul><h4 id="æ­¥éª¤-4-é…ç½®æ–‡ä»¶" tabindex="-1">æ­¥éª¤ 4: é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#æ­¥éª¤-4-é…ç½®æ–‡ä»¶" aria-label="Permalink to &quot;æ­¥éª¤ 4: é…ç½®æ–‡ä»¶&quot;">â€‹</a></h4><p>MaiBot &gt;= 0.10.0 ç‰ˆæœ¬ä¼šåˆ›å»ºä»¥ä¸‹é…ç½®æ–‡ä»¶ï¼š</p><ul><li><code>config/bot_config.toml</code>: æœºå™¨äººåŸºæœ¬é…ç½®</li><li><code>config/model_config.toml</code>: æ¨¡å‹é…ç½®ï¼ˆAPI å¯†é’¥ç­‰ï¼‰</li><li><code>.env</code>: ç¯å¢ƒå˜é‡é…ç½®</li></ul><p>æ—§ç‰ˆæœ¬å¯èƒ½è¿˜ä¼šåŒ…å«ï¼š</p><ul><li><code>config/lpmm_config.toml</code>: LPMM çŸ¥è¯†åº“é…ç½®</li></ul><h3 id="maibot-ç›®å½•ç»“æ„" tabindex="-1">MaiBot ç›®å½•ç»“æ„ <a class="header-anchor" href="#maibot-ç›®å½•ç»“æ„" aria-label="Permalink to &quot;MaiBot ç›®å½•ç»“æ„&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>instances/</span></span>
<span class="line"><span>â””â”€â”€ [å®ä¾‹åç§°]/</span></span>
<span class="line"><span>    â”œâ”€â”€ MaiBot/                 # MaiBot ä¸»ç¨‹åº</span></span>
<span class="line"><span>    â”‚   â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶ç›®å½•</span></span>
<span class="line"><span>    â”‚   â”œâ”€â”€ data/               # æ•°æ®ç›®å½•</span></span>
<span class="line"><span>    â”‚   â”œâ”€â”€ template/           # é…ç½®æ¨¡æ¿</span></span>
<span class="line"><span>    â”‚   â””â”€â”€ requirements.txt    # ä¾èµ–åˆ—è¡¨</span></span>
<span class="line"><span>    â”œâ”€â”€ MaiBot-Napcat-Adapter/  # é€‚é…å™¨ï¼ˆå¦‚æœå®‰è£…ï¼‰</span></span>
<span class="line"><span>    â””â”€â”€ venv/                   # Python è™šæ‹Ÿç¯å¢ƒ</span></span></code></pre></div><h2 id="ğŸ¦Š-mofox-bot-éƒ¨ç½²æŒ‡å—" tabindex="-1">ğŸ¦Š MoFox_bot éƒ¨ç½²æŒ‡å— <a class="header-anchor" href="#ğŸ¦Š-mofox-bot-éƒ¨ç½²æŒ‡å—" aria-label="Permalink to &quot;ğŸ¦Š MoFox_bot éƒ¨ç½²æŒ‡å—&quot;">â€‹</a></h2><h3 id="mofox-bot-ç®€ä»‹" tabindex="-1">MoFox_bot ç®€ä»‹ <a class="header-anchor" href="#mofox-bot-ç®€ä»‹" aria-label="Permalink to &quot;MoFox_bot ç®€ä»‹&quot;">â€‹</a></h3><p>MoFox_bot æ˜¯ä¸€ä¸ªé«˜æ€§èƒ½çš„ QQ æœºå™¨äººæ¡†æ¶ï¼Œå…·æœ‰å†…ç½®é€‚é…å™¨å’Œå¼ºå¤§çš„åŠŸèƒ½ç‰¹æ€§ã€‚</p><h3 id="éƒ¨ç½²æ­¥éª¤-1" tabindex="-1">éƒ¨ç½²æ­¥éª¤ <a class="header-anchor" href="#éƒ¨ç½²æ­¥éª¤-1" aria-label="Permalink to &quot;éƒ¨ç½²æ­¥éª¤&quot;">â€‹</a></h3><h4 id="æ­¥éª¤-1-é€‰æ‹©-mofox-bot" tabindex="-1">æ­¥éª¤ 1: é€‰æ‹© MoFox_bot <a class="header-anchor" href="#æ­¥éª¤-1-é€‰æ‹©-mofox-bot" aria-label="Permalink to &quot;æ­¥éª¤ 1: é€‰æ‹© MoFox_bot&quot;">â€‹</a></h4><p>åœ¨ Bot ç±»å‹é€‰æ‹©æ—¶è¾“å…¥ <code>2</code></p><h4 id="æ­¥éª¤-2-ç‰ˆæœ¬é€‰æ‹©-1" tabindex="-1">æ­¥éª¤ 2: ç‰ˆæœ¬é€‰æ‹© <a class="header-anchor" href="#æ­¥éª¤-2-ç‰ˆæœ¬é€‰æ‹©-1" aria-label="Permalink to &quot;æ­¥éª¤ 2: ç‰ˆæœ¬é€‰æ‹©&quot;">â€‹</a></h4><p>MoFox_bot ç‰ˆæœ¬é€‰æ‹©ç•Œé¢ç±»ä¼¼ï¼Œä½†ä»“åº“ä¸åŒ</p><p><strong>æ¨èé€‰æ‹©</strong>:</p><ul><li><strong>æ–°æ‰‹</strong>: é€‰æ‹©æœ€æ–°çš„ Release ç‰ˆæœ¬</li><li><strong>å¼€å‘è€…</strong>: é€‰æ‹© main åˆ†æ”¯</li></ul><h4 id="æ­¥éª¤-3-é€‚é…å™¨è¯´æ˜" tabindex="-1">æ­¥éª¤ 3: é€‚é…å™¨è¯´æ˜ <a class="header-anchor" href="#æ­¥éª¤-3-é€‚é…å™¨è¯´æ˜" aria-label="Permalink to &quot;æ­¥éª¤ 3: é€‚é…å™¨è¯´æ˜&quot;">â€‹</a></h4><p><strong>é‡è¦</strong>: MoFox_bot å†…ç½®é€‚é…å™¨ï¼Œé€šå¸¸æ— éœ€å®‰è£…å¤–ç½®é€‚é…å™¨ã€‚</p><p>å¦‚æœé€‰æ‹©å®‰è£…å¤–ç½®é€‚é…å™¨ï¼Œç³»ç»Ÿä¼šæç¤ºï¼š</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>â„¹ï¸ å¤–ç½®é€‚é…å™¨æé†’</span></span>
<span class="line"><span>å¢¨ç‹å·²ç»å°†é€‚é…å™¨ä½œä¸ºæ’ä»¶å†…ç½®åœ¨ä¸»ç¨‹åºä¸­ã€‚</span></span>
<span class="line"><span>å¦‚éœ€è·å–å¤–ç½®é€‚é…å™¨ï¼Œè¯·è®¿é—®ï¼š</span></span>
<span class="line"><span>https://github.com/MoFox-Studio/NapCat-Adapter</span></span></code></pre></div><h4 id="æ­¥éª¤-4-é…ç½®æ–‡ä»¶-1" tabindex="-1">æ­¥éª¤ 4: é…ç½®æ–‡ä»¶ <a class="header-anchor" href="#æ­¥éª¤-4-é…ç½®æ–‡ä»¶-1" aria-label="Permalink to &quot;æ­¥éª¤ 4: é…ç½®æ–‡ä»¶&quot;">â€‹</a></h4><p>MoFox_bot ä¼šåˆ›å»ºä»¥ä¸‹é…ç½®æ–‡ä»¶ï¼š</p><ul><li><code>config/bot_config.toml</code>: æœºå™¨äººåŸºæœ¬é…ç½®</li><li><code>config/model_config.toml</code>: æ¨¡å‹é…ç½®</li><li><code>.env</code>: ç¯å¢ƒå˜é‡é…ç½®</li></ul><h3 id="mofox-bot-ç›®å½•ç»“æ„" tabindex="-1">MoFox_bot ç›®å½•ç»“æ„ <a class="header-anchor" href="#mofox-bot-ç›®å½•ç»“æ„" aria-label="Permalink to &quot;MoFox_bot ç›®å½•ç»“æ„&quot;">â€‹</a></h3><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>instances/</span></span>
<span class="line"><span>â””â”€â”€ [å®ä¾‹åç§°]/</span></span>
<span class="line"><span>    â”œâ”€â”€ MoFox_bot/              # MoFox_bot ä¸»ç¨‹åº</span></span>
<span class="line"><span>    â”‚   â”œâ”€â”€ config/             # é…ç½®æ–‡ä»¶ç›®å½•</span></span>
<span class="line"><span>    â”‚   â”œâ”€â”€ data/               # æ•°æ®ç›®å½•</span></span>
<span class="line"><span>    â”‚   â”œâ”€â”€ template/           # é…ç½®æ¨¡æ¿</span></span>
<span class="line"><span>    â”‚   â””â”€â”€ requirements.txt    # ä¾èµ–åˆ—è¡¨</span></span>
<span class="line"><span>    â””â”€â”€ venv/                   # Python è™šæ‹Ÿç¯å¢ƒ</span></span></code></pre></div><h2 id="ğŸ”§-æ ¸å¿ƒç»„ä»¶è¯¦è§£" tabindex="-1">ğŸ”§ æ ¸å¿ƒç»„ä»¶è¯¦è§£ <a class="header-anchor" href="#ğŸ”§-æ ¸å¿ƒç»„ä»¶è¯¦è§£" aria-label="Permalink to &quot;ğŸ”§ æ ¸å¿ƒç»„ä»¶è¯¦è§£&quot;">â€‹</a></h2><h3 id="napcat-éƒ¨ç½²å™¨" tabindex="-1">NapCat éƒ¨ç½²å™¨ <a class="header-anchor" href="#napcat-éƒ¨ç½²å™¨" aria-label="Permalink to &quot;NapCat éƒ¨ç½²å™¨&quot;">â€‹</a></h3><p>NapCat æ˜¯ QQ åè®®ç«¯çš„æ ¸å¿ƒå®ç°ï¼Œè´Ÿè´£ä¸è…¾è®¯æœåŠ¡å™¨å»ºç«‹è¿æ¥ã€‚</p><h4 id="ç‰ˆæœ¬ç±»å‹ä¸é€‰æ‹©ç­–ç•¥" tabindex="-1">ç‰ˆæœ¬ç±»å‹ä¸é€‰æ‹©ç­–ç•¥ <a class="header-anchor" href="#ç‰ˆæœ¬ç±»å‹ä¸é€‰æ‹©ç­–ç•¥" aria-label="Permalink to &quot;ç‰ˆæœ¬ç±»å‹ä¸é€‰æ‹©ç­–ç•¥&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> NapCatDeployer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">BaseDeployer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;NapCatéƒ¨ç½²å™¨ - è´Ÿè´£NapCatçš„ä¸‹è½½ã€å®‰è£…å’Œé…ç½®&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_napcat_versions</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, force_refresh: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; List[Dict]:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;è·å–NapCatç‰ˆæœ¬åˆ—è¡¨&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # ä»GitHub APIè·å–æœ€æ–°releases</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.github_api_base</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/repos/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.napcat_repo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/releases&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requests.get(url, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">headers</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">headers, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">timeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        napcat_versions </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> release </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> releases[:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æœ€æ–°5ä¸ªç‰ˆæœ¬</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            tag_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> release.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;tag_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            assets </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> release.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;assets&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # åˆ†ç±»èµ„äº§</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> assets:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> asset_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;NapCat.Shell.zip&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    napcat_versions.append({</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                        &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tag_name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">-shell&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                        &quot;display_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">tag_name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> åŸºç¡€ç‰ˆ (æ¨è)&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                        &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æœ€æ¨èçš„ç‰ˆæœ¬ï¼Œé€‚åˆå¤§å¤šæ•°ç”¨æˆ·&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                        &quot;download_url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: asset.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;browser_download_url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    })</span></span></code></pre></div><ol><li><p><strong>åŸºç¡€ç‰ˆ (Shell)</strong>:</p><ul><li><strong>æ¨èé€‰æ‹©</strong>: èµ„æºå ç”¨å°‘ï¼Œé€‚åˆç”Ÿäº§ç¯å¢ƒ</li><li><strong>æ— ç•Œé¢</strong>: é€‚åˆæœåŠ¡å™¨éƒ¨ç½²</li><li><strong>è½»é‡çº§</strong>: æœ€å°åŒ–ç³»ç»Ÿä¾èµ–</li></ul></li><li><p><strong>æœ‰å¤´ä¸€é”®åŒ… (Framework)</strong>:</p><ul><li><strong>å¯è§†åŒ–ç•Œé¢</strong>: å¸¦å®Œæ•´ QQ ç•Œé¢</li><li><strong>é™„ä½“åŠŸèƒ½</strong>: æ”¯æŒ QQ è´¦å·é™„ä½“å‘æ¶ˆæ¯</li><li><strong>ç”¨æˆ·å‹å¥½</strong>: é€‚åˆæ¡Œé¢ç”¨æˆ·</li></ul></li><li><p><strong>æ— å¤´ä¸€é”®åŒ… (Shell OneKey)</strong>:</p><ul><li><strong>ä¸€é”®å®‰è£…</strong>: è‡ªåŠ¨åŒ–ç¨‹åº¦æœ€é«˜</li><li><strong>æ— ç•Œé¢</strong>: é€‚åˆè‡ªåŠ¨åŒ–éƒ¨ç½²</li><li><strong>å¿«é€Ÿå¯åŠ¨</strong>: æœ€å°åŒ–é…ç½®æ­¥éª¤</li></ul></li></ol><h4 id="æ™ºèƒ½å®‰è£…æµç¨‹" tabindex="-1">æ™ºèƒ½å®‰è£…æµç¨‹ <a class="header-anchor" href="#æ™ºèƒ½å®‰è£…æµç¨‹" aria-label="Permalink to &quot;æ™ºèƒ½å®‰è£…æµç¨‹&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> install_napcat</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, deploy_config: Dict, bot_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;å®‰è£…NapCat&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    napcat_version </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> deploy_config[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;napcat_version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ä¸‹è½½NapCat</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    napcat_exe </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.download_napcat(napcat_version, install_dir)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> napcat_exe:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # ç­‰å¾…ç”¨æˆ·å®Œæˆå®‰è£…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        napcat_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._wait_for_napcat_installation(install_dir)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> napcat_path:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> napcat_path</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _wait_for_napcat_installation</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, install_dir: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;ç­‰å¾…NapCatå®‰è£…å®Œæˆå¹¶æ£€æµ‹è·¯å¾„&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> attempt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">4</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æœ€å¤šæ£€æµ‹3æ¬¡</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        napcat_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.find_installed_napcat(install_dir)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> napcat_path:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> napcat_path</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> attempt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            time.sleep(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç­‰å¾…5ç§’åé‡è¯•</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span></span></code></pre></div><div class="warning custom-block"><p class="custom-block-title">NapCat å®‰è£…æ³¨æ„äº‹é¡¹</p><ul><li><strong>æƒé™è¦æ±‚</strong>: å®‰è£…è¿‡ç¨‹å¯èƒ½éœ€è¦ç®¡ç†å‘˜æƒé™</li><li><strong>å®‰å…¨è½¯ä»¶</strong>: æ€æ¯’è½¯ä»¶å¯èƒ½è¯¯æŠ¥ï¼Œå»ºè®®æ·»åŠ ä¿¡ä»»</li><li><strong>è´¦å·å®‰å…¨</strong>: å»ºè®®ä½¿ç”¨ä¸“é—¨çš„ QQ å°å·</li><li><strong>ç½‘ç»œç¯å¢ƒ</strong>: ç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®š</li></ul></div><h3 id="webui-éƒ¨ç½²ç³»ç»Ÿ" tabindex="-1">WebUI éƒ¨ç½²ç³»ç»Ÿ <a class="header-anchor" href="#webui-éƒ¨ç½²ç³»ç»Ÿ" aria-label="Permalink to &quot;WebUI éƒ¨ç½²ç³»ç»Ÿ&quot;">â€‹</a></h3><h4 id="maibot-webui-æ¶æ„" tabindex="-1">MaiBot WebUI æ¶æ„ <a class="header-anchor" href="#maibot-webui-æ¶æ„" aria-label="Permalink to &quot;MaiBot WebUI æ¶æ„&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> WebUIComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_LaunchComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;WebUIç»„ä»¶ - æä¾›ç½‘é¡µç®¡ç†ç•Œé¢&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> start</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, process_manager: _ProcessManager) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        webui_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.config.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;webui_path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # ä¼˜å…ˆä½¿ç”¨ bun åŠ é€Ÿæ„å»º</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        bun_cmd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._resolve_bun_command(webui_path)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bun_cmd:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            bun_exec </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bun_cmd</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            bun_exec </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;bun&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # å¯åŠ¨å¼€å‘æœåŠ¡å™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        command </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bun_exec</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> run dev -- --port 7999&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        process </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> process_manager.start_in_new_cmd(command, webui_path, title)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # è‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        webbrowser.open(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://localhost:7999&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span></span></code></pre></div><p><strong>æŠ€æœ¯æ ˆ</strong>:</p><ul><li><strong>å‰ç«¯</strong>: Vue.js 3 + TypeScript + Vite</li><li><strong>åç«¯</strong>: Python Flask + FastAPI</li><li><strong>æ„å»ºå·¥å…·</strong>: Bun (é«˜æ€§èƒ½åŒ…ç®¡ç†å™¨)</li></ul><h4 id="mofox-bot-åå°ç®¡ç†" tabindex="-1">MoFox_bot åå°ç®¡ç† <a class="header-anchor" href="#mofox-bot-åå°ç®¡ç†" aria-label="Permalink to &quot;MoFox_bot åå°ç®¡ç†&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _install_mofox_admin_ui</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, deploy_config: Dict) -&gt; Tuple[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;å®‰è£…MoFox_botåå°ç®¡ç†WebUI&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ£€æŸ¥Node.jsç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> webui_installer.check_nodejs_installed():</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ui.confirm(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ˜¯å¦è‡ªåŠ¨å®‰è£…Node.jsï¼Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            webui_installer.install_nodejs()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ä¸‹è½½å¹¶å®‰è£…WebUI</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    download_url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;https://github.com/MoFox-Studio/MoFox-UI/archive/refs/heads/main.zip&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> tempfile.TemporaryDirectory() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> temp_dir:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        archive_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.join(temp_dir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mofox_ui.zip&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.download_file(download_url, archive_path):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.extract_archive(archive_path, temp_dir)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # å®‰è£…npmä¾èµ–</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> subprocess.run(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;npm&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;install&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                cwd</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">webui_path,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                capture_output</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">                text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result.returncode </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, webui_path</span></span></code></pre></div><h3 id="ç«¯å£ç®¡ç†ç³»ç»Ÿ" tabindex="-1">ç«¯å£ç®¡ç†ç³»ç»Ÿ <a class="header-anchor" href="#ç«¯å£ç®¡ç†ç³»ç»Ÿ" aria-label="Permalink to &quot;ç«¯å£ç®¡ç†ç³»ç»Ÿ&quot;">â€‹</a></h3><h4 id="æ™ºèƒ½ç«¯å£åˆ†é…" tabindex="-1">æ™ºèƒ½ç«¯å£åˆ†é… <a class="header-anchor" href="#æ™ºèƒ½ç«¯å£åˆ†é…" aria-label="Permalink to &quot;æ™ºèƒ½ç«¯å£åˆ†é…&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> PortManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;ç«¯å£ç®¡ç†å™¨ - è´Ÿè´£æ£€æµ‹ç«¯å£å†²çªã€åˆ†é…å¯ç”¨ç«¯å£&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    COMMON_PORTS</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;mai_main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),      </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># MaiBotä¸»ç¨‹åºç«¯å£èŒƒå›´</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;mai_webui&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8001</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8101</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),     </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># MaiBot WebUIç«¯å£èŒƒå›´</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;mofox_main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),    </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># MoFox_botä¸»ç¨‹åºç«¯å£èŒƒå›´</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;napcat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8090</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8190</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),        </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># NapCatç«¯å£èŒƒå›´</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;webui&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">7990</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8090</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),         </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ§åˆ¶é¢æ¿ç«¯å£èŒƒå›´</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_next_instance_port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, instance_type: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, base_config: Dict) -&gt; Tuple[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;ä¸ºæ–°å®ä¾‹è·å–ä¸‹ä¸€ä¸ªå¯ç”¨ç«¯å£ç»„åˆ&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;MaiBot&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            main_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.find_available_port(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mai_main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            webui_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.find_available_port(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mai_webui&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, main_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> main_port, webui_port</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        elif</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;MoFox_bot&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            main_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.find_available_port(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mofox_main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            napcat_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.find_available_port(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;napcat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, main_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> main_port, napcat_port</span></span></code></pre></div><h4 id="é…ç½®æ–‡ä»¶è‡ªåŠ¨æ›´æ–°" tabindex="-1">é…ç½®æ–‡ä»¶è‡ªåŠ¨æ›´æ–° <a class="header-anchor" href="#é…ç½®æ–‡ä»¶è‡ªåŠ¨æ›´æ–°" aria-label="Permalink to &quot;é…ç½®æ–‡ä»¶è‡ªåŠ¨æ›´æ–°&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> update_env_file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, env_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, main_port: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, webui_port: Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;æ›´æ–°.envæ–‡ä»¶ä¸­çš„ç«¯å£é…ç½®&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    with</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(env_path, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;r&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">encoding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf-8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f.read()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ›´æ–°ç«¯å£é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> re.sub(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">PORT=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;PORT=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">main_port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, content)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> webui_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">is</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> re.sub(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">WEBUI_PORT=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;WEBUI_PORT=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">webui_port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, content)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> re.sub(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#032F62;--shiki-dark:#DBEDFF;">WEBUI_ENABLED=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">.</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">*</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;WEBUI_ENABLED=true&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, content)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    with</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(env_path, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;w&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">encoding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf-8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        f.write(content)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span></span></code></pre></div><h3 id="mongodb-æ•°æ®åº“é›†æˆ" tabindex="-1">MongoDB æ•°æ®åº“é›†æˆ <a class="header-anchor" href="#mongodb-æ•°æ®åº“é›†æˆ" aria-label="Permalink to &quot;MongoDB æ•°æ®åº“é›†æˆ&quot;">â€‹</a></h3><h4 id="ç‰ˆæœ¬ä¾èµ–æ£€æµ‹" tabindex="-1">ç‰ˆæœ¬ä¾èµ–æ£€æµ‹ <a class="header-anchor" href="#ç‰ˆæœ¬ä¾èµ–æ£€æµ‹" aria-label="Permalink to &quot;ç‰ˆæœ¬ä¾èµ–æ£€æµ‹&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> needs_mongodb</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(version: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;æ£€æµ‹ç‰ˆæœ¬æ˜¯å¦éœ€è¦MongoDBï¼ˆ0.7ä»¥ä¸‹ç‰ˆæœ¬éœ€è¦ï¼‰&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> version </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;classical&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # åˆ†æ”¯ç‰ˆæœ¬åˆ¤æ–­</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;main&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> version </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">or</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;dev&quot;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> version:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # åˆ†æ”¯ç‰ˆæœ¬é»˜è®¤ä¸éœ€è¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # ç§»é™¤vå‰ç¼€</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> version.startswith(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;v&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            version </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> version[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        version_parts </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> version.split(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(version_parts) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            major </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(version_parts[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            minor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(version_parts[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # æ£€æŸ¥æ˜¯å¦å°äº0.7.0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> major </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> or</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (major </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> and</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> minor </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 7</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    except</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">ValueError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">IndexError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # æ— æ³•è§£ææ—¶ï¼Œä¿å®ˆåœ°å‡è®¾éœ€è¦</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span></code></pre></div><h2 id="ğŸ“-é…ç½®æ–‡ä»¶è¯´æ˜" tabindex="-1">ğŸ“ é…ç½®æ–‡ä»¶è¯´æ˜ <a class="header-anchor" href="#ğŸ“-é…ç½®æ–‡ä»¶è¯´æ˜" aria-label="Permalink to &quot;ğŸ“ é…ç½®æ–‡ä»¶è¯´æ˜&quot;">â€‹</a></h2><h3 id="é…ç½®æ–‡ä»¶ç”Ÿæˆç³»ç»Ÿ" tabindex="-1">é…ç½®æ–‡ä»¶ç”Ÿæˆç³»ç»Ÿ <a class="header-anchor" href="#é…ç½®æ–‡ä»¶ç”Ÿæˆç³»ç»Ÿ" aria-label="Permalink to &quot;é…ç½®æ–‡ä»¶ç”Ÿæˆç³»ç»Ÿ&quot;">â€‹</a></h3>`,88)),i("p",null,[s[23]||(s[23]=a("éƒ¨ç½²ç³»ç»Ÿä¼šæ ¹æ® Bot ç±»å‹å’Œç‰ˆæœ¬è‡ªåŠ¨ç§»åŠ¨ç›¸åº”çš„é…ç½®æ–‡ä»¶ï¼Œå¹¶åœ¨éƒ¨ç½²å®Œæˆæ—¶è¯¢é—®ä½ æ˜¯å¦éœ€è¦æ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œé»˜è®¤é€‰æ‹©",-1)),n(t,{href:"./../function/miscellaneous/components"},{default:h(()=>[...s[22]||(s[22]=[a("VSCode",-1)])]),_:1}),s[24]||(s[24]=a("ï¼Œæœªå®‰è£…åˆ™é€‰æ‹©è®°äº‹æœ¬æ‰“å¼€ï¼š",-1))]),s[42]||(s[42]=l(`<div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup_config_files</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, deploy_config: Dict, bot_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      adapter_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, napcat_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      mongodb_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, webui_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;è®¾ç½®é…ç½®æ–‡ä»¶&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    version_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> deploy_config.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;selected_version&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {}).get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ ¹æ®ç‰ˆæœ¬é€‰æ‹©é…ç½®æ–‡ä»¶æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> compare_versions(version_name, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0.10.0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # æ–°ç‰ˆæœ¬é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._setup_modern_config(bot_path, deploy_config)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # æ—§ç‰ˆæœ¬é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._setup_legacy_config(bot_path, deploy_config)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # è®¾ç½®é€‚é…å™¨é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> adapter_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">and</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> adapter_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ— éœ€é€‚é…å™¨&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è·³è¿‡é€‚é…å™¨å®‰è£…&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._setup_adapter_config(adapter_path)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span></span></code></pre></div><h3 id="bot-config-toml" tabindex="-1">bot_config.toml <a class="header-anchor" href="#bot-config-toml" aria-label="Permalink to &quot;bot_config.toml&quot;">â€‹</a></h3><p>æœºå™¨äººæ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼š</p><p><strong>ä»…å±•ç¤ºæœ€é‡è¦çš„äººæ ¼é…ç½®ç­‰éƒ¨åˆ†</strong></p><details class="details custom-block"><summary>MaiBot</summary><div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">platform = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;qq&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qq_account = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1145141919810&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # éº¦éº¦çš„QQè´¦å·</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">platforms = [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;wx:114514&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;xx:1919810&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># éº¦éº¦çš„å…¶ä»–å¹³å°è´¦å·</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nickname = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;éº¦éº¦&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # éº¦éº¦çš„æ˜µç§°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">alias_names = [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;éº¦å &quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç‰¢éº¦&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># éº¦éº¦çš„åˆ«å</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">personality</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å»ºè®®120å­—ä»¥å†…ï¼Œæè¿°äººæ ¼ç‰¹è´¨ å’Œ èº«ä»½ç‰¹å¾</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">personality = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ˜¯ä¸€ä¸ªå¥³å¤§å­¦ç”Ÿï¼Œç°åœ¨åœ¨è¯»å¤§äºŒï¼Œä¼šåˆ·è´´å§ã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒãªã„ ç”Ÿã¾ã‚Œãªã„ã‚‰ã‚‰ã‚‰ã‚‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æè¿°éº¦éº¦è¯´è¯çš„è¡¨è¾¾é£æ ¼ï¼Œè¡¨è¾¾ä¹ æƒ¯ï¼Œå¦‚è¦ä¿®æ”¹ï¼Œå¯ä»¥é…Œæƒ…æ–°å¢å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">reply_style = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¯·å›å¤çš„å¹³æ·¡ä¸€äº›ï¼Œç®€çŸ­ä¸€äº›ï¼Œè¯´ä¸­æ–‡ï¼Œä¸è¦åˆ»æ„çªå‡ºè‡ªèº«å­¦ç§‘èƒŒæ™¯ã€‚å¯ä»¥å‚è€ƒè´´å§ï¼ŒçŸ¥ä¹å’Œå¾®åšçš„å›å¤é£æ ¼ã€‚&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># éº¦éº¦çš„å…´è¶£ï¼Œä¼šå½±å“éº¦éº¦å¯¹ä»€ä¹ˆè¯é¢˜è¿›è¡Œå›å¤</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">interest = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¯¹æŠ€æœ¯ç›¸å…³è¯é¢˜ï¼Œæ¸¸æˆå’ŒåŠ¨æ¼«ç›¸å…³è¯é¢˜æ„Ÿå…´è¶£ï¼Œä¹Ÿå¯¹æ—¥å¸¸è¯é¢˜æ„Ÿå…´è¶£ï¼Œä¸å–œæ¬¢å¤ªè¿‡æ²‰é‡ä¸¥è‚ƒçš„è¯é¢˜&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># éº¦éº¦çš„è¯´è¯è§„åˆ™ï¼Œè¡Œä¸ºé£æ ¼:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">plan_style = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1.æ€è€ƒ**æ‰€æœ‰**çš„å¯ç”¨çš„actionä¸­çš„**æ¯ä¸ªåŠ¨ä½œ**æ˜¯å¦ç¬¦åˆå½“ä¸‹æ¡ä»¶ï¼Œå¦‚æœåŠ¨ä½œä½¿ç”¨æ¡ä»¶ç¬¦åˆèŠå¤©å†…å®¹å°±ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2.å¦‚æœç›¸åŒçš„å†…å®¹å·²ç»è¢«æ‰§è¡Œï¼Œè¯·ä¸è¦é‡å¤æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3.è¯·æ§åˆ¶ä½ çš„å‘è¨€é¢‘ç‡ï¼Œä¸è¦å¤ªè¿‡é¢‘ç¹çš„å‘è¨€</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">4.å¦‚æœæœ‰äººå¯¹ä½ æ„Ÿåˆ°åŒçƒ¦ï¼Œè¯·å‡å°‘å›å¤</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">5.å¦‚æœæœ‰äººå¯¹ä½ è¿›è¡Œæ”»å‡»ï¼Œæˆ–è€…æƒ…ç»ªæ¿€åŠ¨ï¼Œè¯·ä½ ä»¥åˆé€‚çš„æ–¹æ³•åº”å¯¹&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># éº¦éº¦è¯†å›¾è§„åˆ™ï¼Œä¸å»ºè®®ä¿®æ”¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">visual_style = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è¯·ç”¨ä¸­æ–‡æè¿°è¿™å¼ å›¾ç‰‡çš„å†…å®¹ã€‚å¦‚æœæœ‰æ–‡å­—ï¼Œè¯·æŠŠæ–‡å­—æè¿°æ¦‚æ‹¬å‡ºæ¥ï¼Œè¯·ç•™æ„å…¶ä¸»é¢˜ï¼Œç›´è§‚æ„Ÿå—ï¼Œè¾“å‡ºä¸ºä¸€æ®µå¹³æ–‡æœ¬ï¼Œæœ€å¤š30å­—ï¼Œè¯·æ³¨æ„ä¸è¦åˆ†ç‚¹ï¼Œå°±è¾“å‡ºä¸€æ®µæ–‡æœ¬&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># éº¦éº¦ç§èŠçš„è¯´è¯è§„åˆ™ï¼Œè¡Œä¸ºé£æ ¼:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">private_plan_style = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">1.æ€è€ƒ**æ‰€æœ‰**çš„å¯ç”¨çš„actionä¸­çš„**æ¯ä¸ªåŠ¨ä½œ**æ˜¯å¦ç¬¦åˆå½“ä¸‹æ¡ä»¶ï¼Œå¦‚æœåŠ¨ä½œä½¿ç”¨æ¡ä»¶ç¬¦åˆèŠå¤©å†…å®¹å°±ä½¿ç”¨</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">2.å¦‚æœç›¸åŒçš„å†…å®¹å·²ç»è¢«æ‰§è¡Œï¼Œè¯·ä¸è¦é‡å¤æ‰§è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">3.æŸå¥è¯å¦‚æœå·²ç»è¢«å›å¤è¿‡ï¼Œä¸è¦é‡å¤å›å¤&quot;&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># çŠ¶æ€ï¼Œå¯ä»¥ç†è§£ä¸ºäººæ ¼å¤šæ ·æ€§ï¼Œä¼šéšæœºæ›¿æ¢äººæ ¼</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">states = [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;æ˜¯ä¸€ä¸ªå¥³å¤§å­¦ç”Ÿï¼Œå–œæ¬¢ä¸Šç½‘èŠå¤©ï¼Œä¼šåˆ·å°çº¢ä¹¦ã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;æ˜¯ä¸€ä¸ªå¤§äºŒå¿ƒç†å­¦ç”Ÿï¼Œä¼šåˆ·è´´å§å’Œä¸­å›½çŸ¥ç½‘ã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;æ˜¯ä¸€ä¸ªèµ›åšç½‘å‹ï¼Œæœ€è¿‘å¾ˆæƒ³åæ§½äººã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ›¿æ¢æ¦‚ç‡ï¼Œæ¯æ¬¡æ„å»ºäººæ ¼æ—¶æ›¿æ¢personalityçš„æ¦‚ç‡ï¼ˆ0.0-1.0ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">state_probability = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.3</span></span></code></pre></div></details><details class="details custom-block"><summary>MoXof_bot</summary><div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bot</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">platform = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;qq&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qq_account = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1145141919810</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # MoFox-Botçš„QQè´¦å·</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nickname = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¢¨ç‹&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # MoFox-Botçš„æ˜µç§°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">alias_names = [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç‹ç‹&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¢¨å¢¨&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># MoFox-Botçš„åˆ«å</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">command</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">command_prefixes = [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;/&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">personality</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å»ºè®®50å­—ä»¥å†…ï¼Œæè¿°äººæ ¼çš„æ ¸å¿ƒç‰¹è´¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">personality_core = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ˜¯ä¸€ä¸ªç§¯æå‘ä¸Šçš„å¥³å¤§å­¦ç”Ÿ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># äººæ ¼çš„ç»†èŠ‚ï¼Œæè¿°äººæ ¼çš„ä¸€äº›ä¾§é¢</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">personality_side = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ç”¨ä¸€å¥è¯æˆ–å‡ å¥è¯æè¿°äººæ ¼çš„ä¾§é¢ç‰¹è´¨&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ãŒãªã„ ç”Ÿã¾ã‚Œãªã„ã‚‰ã‚‰ã‚‰ã‚‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å¯ä»¥æè¿°å¤–è²Œï¼Œæ€§åˆ«ï¼Œèº«é«˜ï¼ŒèŒä¸šï¼Œå±æ€§ç­‰ç­‰æè¿°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">identity = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¹´é¾„ä¸º19å²,æ˜¯å¥³å­©å­,èº«é«˜ä¸º160cm,æœ‰é»‘è‰²çš„çŸ­å‘&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ­¤å¤„ç”¨äºå¡«å†™è¯¦ç»†çš„ä¸–ç•Œè§‚ã€èƒŒæ™¯æ•…äº‹ã€å¤æ‚äººé™…å…³ç³»ç­‰ã€‚</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># è¿™éƒ¨åˆ†å†…å®¹å°†ä½œä¸ºBotçš„â€œèƒŒæ™¯çŸ¥è¯†â€ï¼ŒBotè¢«æŒ‡å¯¼ä¸åº”åœ¨å¯¹è¯ä¸­ä¸»åŠ¨æˆ–é¢‘ç¹åœ°å¤è¿°è¿™äº›è®¾å®šã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">background_story = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æè¿°MoFox-Botè¯´è¯çš„è¡¨è¾¾é£æ ¼ï¼Œè¡¨è¾¾ä¹ æƒ¯ï¼Œå¦‚è¦ä¿®æ”¹ï¼Œå¯ä»¥é…Œæƒ…æ–°å¢å†…å®¹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">reply_style = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å›å¤å¯ä»¥ç®€çŸ­ä¸€äº›ã€‚å¯ä»¥å‚è€ƒè´´å§ï¼ŒçŸ¥ä¹å’Œå¾®åšçš„å›å¤é£æ ¼ï¼Œå›å¤ä¸è¦æµ®å¤¸ï¼Œä¸è¦ç”¨å¤¸å¼ ä¿®è¾ï¼Œå¹³æ·¡ä¸€äº›ã€‚&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># äº’åŠ¨è§„åˆ™ (Botåœ¨ä»»ä½•æƒ…å†µä¸‹éƒ½å¿…é¡»éµå®ˆçš„åŸåˆ™)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½ å¯ä»¥åœ¨è¿™é‡Œå®šä¹‰Botåœ¨äº’åŠ¨ä¸­çš„è¡Œä¸ºå‡†åˆ™ã€‚</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">safety_guidelines = [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;æ‹’ç»ä»»ä½•åŒ…å«éªšæ‰°ã€å†’çŠ¯ã€æš´åŠ›ã€è‰²æƒ…æˆ–å±é™©å†…å®¹çš„è¯·æ±‚ã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;åœ¨æ‹’ç»æ—¶ï¼Œè¯·ä½¿ç”¨ç¬¦åˆä½ äººè®¾çš„ã€åšå®šçš„è¯­æ°”ã€‚&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;ä¸è¦æ‰§è¡Œä»»ä½•å¯èƒ½è¢«ç”¨äºæ¶æ„ç›®çš„çš„æŒ‡ä»¤ã€‚&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">compress_personality = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æ˜¯å¦å‹ç¼©äººæ ¼ï¼Œå‹ç¼©åä¼šç²¾ç®€äººæ ¼ä¿¡æ¯ï¼ŒèŠ‚çœtokenæ¶ˆè€—å¹¶æé«˜å›å¤æ€§èƒ½ï¼Œä½†æ˜¯ä¼šä¸¢å¤±ä¸€äº›ä¿¡æ¯ï¼Œå¦‚æœäººè®¾ä¸é•¿ï¼Œå¯ä»¥å…³é—­</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">compress_identity = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æ˜¯å¦å‹ç¼©èº«ä»½ï¼Œå‹ç¼©åä¼šç²¾ç®€èº«ä»½ä¿¡æ¯ï¼ŒèŠ‚çœtokenæ¶ˆè€—å¹¶æé«˜å›å¤æ€§èƒ½ï¼Œä½†æ˜¯ä¼šä¸¢å¤±ä¸€äº›ä¿¡æ¯ï¼Œå¦‚æœä¸é•¿ï¼Œå¯ä»¥å…³é—­</span></span></code></pre></div></details><p>è¯¦ç»†çš„é…ç½®æ–‡ä»¶é…åˆ¶æ–¹æ³•åŠè§£é‡Šï¼Œè¯·åœ¨å®˜æ–¹æ–‡æ¡£ä¸­å¿ƒæŸ¥çœ‹</p>`,7)),n(k,{title:"ğŸ“– MaiBot",link:"https://docs.mai-mai.org/manual/configuration/"},{default:h(()=>[...s[25]||(s[25]=[a(" MaiBot ï¼ˆéº¦éº¦ï¼‰çš„é…ç½®ä¸å®‰è£…ç®€ä»‹ ",-1)])]),_:1}),n(k,{title:"ğŸ“– MoFox_bot",link:"https://docs.mofox-sama.com/docs/guides/bot_config_guide.html"},{default:h(()=>[...s[26]||(s[26]=[a(" MoFox-Botï¼ˆå¢¨ç‹ï¼‰é…ç½®æ–‡ä»¶ (bot_config.toml) ç©¶æè¯¦ç»†æŒ‡å— ",-1)])]),_:1}),s[43]||(s[43]=i("h3",{id:"model-config-toml",tabindex:"-1"},[a("model_config.toml "),i("a",{class:"header-anchor",href:"#model-config-toml","aria-label":'Permalink to "model_config.toml"'},"â€‹")],-1)),s[44]||(s[44]=i("p",null,"AI æ¨¡å‹é…ç½®æ–‡ä»¶ï¼ˆMaiBot 0.10.0+ï¼‰ä»…å±•ç¤ºéƒ¨åˆ†ï¼š",-1)),i("div",A,[s[29]||(s[29]=i("p",{class:"custom-block-title"},"é‡è¦æé†’",-1)),i("p",null,[i("strong",null,[i("mark",null,[s[28]||(s[28]=a("åœ¨é…ç½®AIæ¨¡å‹æ–‡ä»¶å‰ï¼Œä½ éœ€è¦è·å–APIç§˜é’¥ï¼Œæˆ‘ä»¬é»˜è®¤ä½¿ç”¨ç¡…åŸºæµåŠ¨çš„æœåŠ¡ï¼Œ",-1)),n(t,{href:"./use#ç¬¬é›¶æ­¥-æœ€æœ€æœ€æœ€é‡è¦çš„ä¸€ç‚¹-è·å–ä½ çš„apiç§˜é’¥"},{default:h(()=>[...s[27]||(s[27]=[a("ä½ å¯ä»¥æŸ¥çœ‹è¿™é‡Œäº†è§£å¦‚ä½•è·å–APIç§˜é’¥",-1)])]),_:1})])])])]),s[45]||(s[45]=l(`<div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">api_providers</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># SiliconFlowçš„APIæœåŠ¡å•†é…ç½®</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;SiliconFlow&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">base_url = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://api.siliconflow.cn/v1&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">api_key = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;your-siliconflow-api-key&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">client_type = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;openai&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">max_retry = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">timeout = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">120</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">retry_interval = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">models</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ¨¡å‹ï¼ˆå¯ä»¥é…ç½®å¤šä¸ªï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">model_identifier = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;deepseek-chat&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # æ¨¡å‹æ ‡è¯†ç¬¦ï¼ˆAPIæœåŠ¡å•†æä¾›çš„æ¨¡å‹æ ‡è¯†ç¬¦ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">name = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;deepseek-v3&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">               # æ¨¡å‹åç§°ï¼ˆå¯éšæ„å‘½åï¼Œåœ¨åé¢ä¸­éœ€ä½¿ç”¨è¿™ä¸ªå‘½åï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">api_provider = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;DeepSeek&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          # APIæœåŠ¡å•†åç§°ï¼ˆå¯¹åº”åœ¨api_providersä¸­é…ç½®çš„æœåŠ¡å•†åç§°ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">price_in = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                     # è¾“å…¥ä»·æ ¼ï¼ˆç”¨äºAPIè°ƒç”¨ç»Ÿè®¡ï¼Œå•ä½ï¼šå…ƒ/ M tokenï¼‰ï¼ˆå¯é€‰ï¼Œè‹¥æ— è¯¥å­—æ®µï¼Œé»˜è®¤å€¼ä¸º0ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">price_out = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8.0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                    # è¾“å‡ºä»·æ ¼ï¼ˆç”¨äºAPIè°ƒç”¨ç»Ÿè®¡ï¼Œå•ä½ï¼šå…ƒ/ M tokenï¼‰ï¼ˆå¯é€‰ï¼Œè‹¥æ— è¯¥å­—æ®µï¼Œé»˜è®¤å€¼ä¸º0ï¼‰</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># force_stream_mode = true          # å¼ºåˆ¶æµå¼è¾“å‡ºæ¨¡å¼ï¼ˆè‹¥æ¨¡å‹ä¸æ”¯æŒéæµå¼è¾“å‡ºï¼Œè¯·å–æ¶ˆè¯¥æ³¨é‡Šï¼Œå¯ç”¨å¼ºåˆ¶æµå¼è¾“å‡ºï¼Œè‹¥æ— è¯¥å­—æ®µï¼Œé»˜è®¤å€¼ä¸ºfalseï¼‰</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">model_task_config</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">utils</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># åœ¨éº¦éº¦çš„ä¸€äº›ç»„ä»¶ä¸­ä½¿ç”¨çš„æ¨¡å‹ï¼Œä¾‹å¦‚è¡¨æƒ…åŒ…æ¨¡å—ï¼Œå–åæ¨¡å—ï¼Œå…³ç³»æ¨¡å—ï¼Œéº¦éº¦çš„æƒ…ç»ªå˜åŒ–ç­‰ï¼Œæ˜¯éº¦éº¦å¿…é¡»çš„æ¨¡å‹</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">model_list = [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;siliconflow-deepseek-v3.2&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ä½¿ç”¨çš„æ¨¡å‹åˆ—è¡¨ï¼Œæ¯ä¸ªå­é¡¹å¯¹åº”ä¸Šé¢çš„æ¨¡å‹åç§°(name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">temperature = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.2</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                        # æ¨¡å‹æ¸©åº¦ï¼Œæ–°V3å»ºè®®0.1-0.3</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">max_tokens = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2048</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                         # æœ€å¤§è¾“å‡ºtokenæ•°</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">slow_threshold = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">15.0</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                     # æ…¢è¯·æ±‚é˜ˆå€¼ï¼ˆç§’ï¼‰ï¼Œæ¨¡å‹ç­‰å¾…å›å¤æ—¶é—´è¶…è¿‡æ­¤å€¼ä¼šè¾“å‡ºè­¦å‘Šæ—¥å¿—</span></span></code></pre></div><h3 id="env" tabindex="-1">.env <a class="header-anchor" href="#env" aria-label="Permalink to &quot;.env&quot;">â€‹</a></h3><p>ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶ï¼š</p><div class="language-env vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">env</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span># éº¦éº¦</span></span>
<span class="line"><span># éº¦éº¦ä¸»ç¨‹åºé…ç½®</span></span>
<span class="line"><span>HOST=127.0.0.1</span></span>
<span class="line"><span>PORT=8000</span></span>
<span class="line"><span></span></span>
<span class="line"><span># WebUI ç‹¬ç«‹æœåŠ¡å™¨é…ç½®</span></span>
<span class="line"><span>WEBUI_ENABLED=true</span></span>
<span class="line"><span>WEBUI_MODE=production   # æ¨¡å¼: development(å¼€å‘) æˆ– production(ç”Ÿäº§)</span></span>
<span class="line"><span>WEBUI_HOST=127.0.0.1    # WebUI æœåŠ¡å™¨ç›‘å¬åœ°å€ï¼ˆé»˜è®¤ä»…æœ¬åœ°è®¿é—®ï¼Œè®¾ç½®ä¸º0.0.0.0å¯å…è®¸å¤–éƒ¨è®¿é—®ï¼‰</span></span>
<span class="line"><span>WEBUI_PORT=8000         # WebUI æœåŠ¡å™¨ç«¯å£</span></span>
<span class="line"><span># ------------------------------------------------------------------</span></span>
<span class="line"><span># å¢¨ç‹</span></span>
<span class="line"><span>HOST=127.0.0.1</span></span>
<span class="line"><span>PORT=8000</span></span>
<span class="line"><span>EULA_CONFIRMED=true     # éšç§åè®®</span></span></code></pre></div><h3 id="é…ç½®æ–‡ä»¶æ¨¡æ¿ç³»ç»Ÿ" tabindex="-1">é…ç½®æ–‡ä»¶æ¨¡æ¿ç³»ç»Ÿ <a class="header-anchor" href="#é…ç½®æ–‡ä»¶æ¨¡æ¿ç³»ç»Ÿ" aria-label="Permalink to &quot;é…ç½®æ–‡ä»¶æ¨¡æ¿ç³»ç»Ÿ&quot;">â€‹</a></h3><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _copy_config_template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, template_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, target_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, replacements: Dict[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;å¤åˆ¶å¹¶æ›¿æ¢é…ç½®æ¨¡æ¿&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    with</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(template_path, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;r&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">encoding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf-8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f.read()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ‰§è¡Œå˜é‡æ›¿æ¢</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> key, value </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> replacements.items():</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        content </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> content.replace(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{{{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">key</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}}}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(value))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ç¡®ä¿ç›®æ ‡ç›®å½•å­˜åœ¨</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    os.makedirs(os.path.dirname(target_path), </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exist_ok</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    with</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> open</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(target_path, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;w&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">encoding</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf-8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> f:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        f.write(content)</span></span></code></pre></div><h3 id="ç™»å½•å¹¶é…ç½®napcatwebui-shellç‰ˆ" tabindex="-1"><strong>ç™»å½•å¹¶é…ç½®NapCatWebUIï¼ˆShellç‰ˆï¼‰</strong> <a class="header-anchor" href="#ç™»å½•å¹¶é…ç½®napcatwebui-shellç‰ˆ" aria-label="Permalink to &quot;**ç™»å½•å¹¶é…ç½®NapCatWebUIï¼ˆShellç‰ˆï¼‰**&quot;">â€‹</a></h3><ol><li>å¯åŠ¨ NapCat ï¼Œä»”ç»†æŸ¥çœ‹ç»ˆç«¯çª—å£ï¼Œæ‰¾åˆ°ç±»ä¼¼è¿™æ ·çš„è¾“å‡ºï¼š</li></ol><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>   12-18 17:27:21 [info] [NapCat] [WebUi] WebUi User Panel Url: http://127.0.0.1:6099/webui?token=ccfee65cfff7</span></span>
<span class="line"><span>   12-18 17:27:21 [info] [NapCat] [WebUi] WebUi User Panel Url: http://0.0.0.0:6099/webui?token=ccfee65cfff7</span></span></code></pre></div><p>è¿™å°±æ˜¯WebUIçš„ç™»å½•åœ°å€ï¼Œä¹‹æ‰€ä»¥æ¨èShellç‰ˆï¼Œæ˜¯åº”ä¸ºç°åœ¨NapCatåœ¨éƒ¨ç½²å®Œæˆåï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆå¤æ‚çš„ç™»å½•ä»¤ç‰Œï¼ˆä¹Ÿå°±æ˜¯åœ°å€åé¢çš„tokenå€¼ï¼‰ï¼Œè€ŒShellä¼šç›´æ¥ç»™å‡ºæ¥ï¼Œæ–¹ä¾¿ä½ ç™»å½•ã€‚</p><ol start="2"><li><p>åœ¨æµè§ˆå™¨è¾“å…¥ WebUI çš„ç™»å½•åœ°å€ï¼Œå›è½¦ï¼Œé€‰æ‹©ä½ è¦å¿«æ·ç™»å½•çš„QQè´¦å·æˆ–æ‰«ç ç™»å½•ã€‚</p></li><li><p>ç™»å½•æˆåŠŸåï¼Œé€‰æ‹©ä¾§è¾¹æ çš„ç½‘ç»œé…ç½® â†’ æ–°å»º â†’ Websocketå®¢æˆ·ç«¯</p></li><li><p>URLå¡«å†™ï¼š<code>ws://localhost:8095</code></p></li><li><p>æ¸…ç©ºTokenæ ï¼ˆè¿™æ˜¯é˜²æ­¢ä½ å¿˜è®°åœ¨é€‚é…å™¨ä¸­å¡«å†™æ‚¨çš„Tokenï¼‰</p></li><li><p>å°†â€œå¯ç”¨&quot;å‹¾é€‰ä¸Š</p></li><li><p>ä¿å­˜ <img src="`+y+`" alt="ç¤ºä¾‹"></p></li></ol><h2 id="â“-å¸¸è§é—®é¢˜è§£å†³" tabindex="-1">â“ å¸¸è§é—®é¢˜è§£å†³ <a class="header-anchor" href="#â“-å¸¸è§é—®é¢˜è§£å†³" aria-label="Permalink to &quot;â“ å¸¸è§é—®é¢˜è§£å†³&quot;">â€‹</a></h2><h3 id="ç½‘ç»œè¿æ¥é—®é¢˜" tabindex="-1">ç½‘ç»œè¿æ¥é—®é¢˜ <a class="header-anchor" href="#ç½‘ç»œè¿æ¥é—®é¢˜" aria-label="Permalink to &quot;ç½‘ç»œè¿æ¥é—®é¢˜&quot;">â€‹</a></h3><h4 id="é—®é¢˜-1-github-api-é™åˆ¶" tabindex="-1">é—®é¢˜ 1: GitHub API é™åˆ¶ <a class="header-anchor" href="#é—®é¢˜-1-github-api-é™åˆ¶" aria-label="Permalink to &quot;é—®é¢˜ 1: GitHub API é™åˆ¶&quot;">â€‹</a></h4><p><strong>ç—‡çŠ¶</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ç½‘ç»œè¿æ¥å¤±è´¥:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> æ— æ³•è¿æ¥åˆ°GitHubå’ŒPyPIé•œåƒç«™ç‚¹</span></span></code></pre></div><p><strong>æŠ€æœ¯åˆ†æ</strong>:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> check_network_connection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self) -&gt; Tuple[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;ç½‘ç»œè¿æ¥æ£€æŸ¥å®ç°&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    endpoints </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://api.github.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;GitHub API&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://github.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;GitHub&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        (</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://pypi.tuna.tsinghua.edu.cn&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ¸…åPyPIé•œåƒ&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> url, name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> endpoints:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requests.get(url, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">timeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">5</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.status_code </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">200</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">301</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">302</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            continue</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ— æ³•è¿æ¥åˆ°GitHubå’ŒPyPIé•œåƒç«™ç‚¹&quot;</span></span></code></pre></div><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><ol><li><strong>ç­‰å¾…é‡è¯•</strong>: GitHub API é€Ÿç‡é™åˆ¶é€šå¸¸åœ¨ å‡ ç§’å†…æ¢å¤</li><li><strong>ä»£ç†é…ç½®</strong>: é…ç½®ä»£ç†æˆ–ä½¿ç”¨æ‰‹æœºçƒ­ç‚¹</li><li><strong>ç¦»çº¿æ¨¡å¼</strong>: ä½¿ç”¨æœ¬åœ°ç¼“å­˜ç»§ç»­éƒ¨ç½²</li></ol><h4 id="é—®é¢˜-2-æ–‡ä»¶ä¸‹è½½å¤±è´¥" tabindex="-1">é—®é¢˜ 2: æ–‡ä»¶ä¸‹è½½å¤±è´¥ <a class="header-anchor" href="#é—®é¢˜-2-æ–‡ä»¶ä¸‹è½½å¤±è´¥" aria-label="Permalink to &quot;é—®é¢˜ 2: æ–‡ä»¶ä¸‹è½½å¤±è´¥&quot;">â€‹</a></h4><p><strong>ç—‡çŠ¶</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ä¸‹è½½å¤±è´¥ï¼ˆå·²é‡è¯•3æ¬¡ï¼‰:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Connection</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> timeout</span></span></code></pre></div><p><strong>é‡è¯•æœºåˆ¶å®ç°</strong>:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> download_file</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, url: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, filename: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, max_retries: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;å¸¦é‡è¯•æœºåˆ¶çš„æ–‡ä»¶ä¸‹è½½&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> attempt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(max_retries):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            response </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requests.get(url, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">stream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">timeout</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">30</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            response.raise_for_status()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # ä½¿ç”¨Richè¿›åº¦æ¡æ˜¾ç¤ºä¸‹è½½è¿›åº¦</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Progress(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> progress:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                task </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> progress.add_task(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä¸‹è½½ </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">file_basename</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">total</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">total_size)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunk </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> response.iter_content(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">chunk_size</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8192</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> chunk:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        f.write(chunk)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                        progress.update(task, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">advance</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(chunk))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        except</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> requests.RequestException </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> attempt </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> max_retries </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                time.sleep(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æŒ‡æ•°é€€é¿</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                continue</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span></code></pre></div><h3 id="ä¾èµ–å®‰è£…é—®é¢˜" tabindex="-1">ä¾èµ–å®‰è£…é—®é¢˜ <a class="header-anchor" href="#ä¾èµ–å®‰è£…é—®é¢˜" aria-label="Permalink to &quot;ä¾èµ–å®‰è£…é—®é¢˜&quot;">â€‹</a></h3><h4 id="é—®é¢˜-3-python-è™šæ‹Ÿç¯å¢ƒåˆ›å»ºå¤±è´¥" tabindex="-1">é—®é¢˜ 3: Python è™šæ‹Ÿç¯å¢ƒåˆ›å»ºå¤±è´¥ <a class="header-anchor" href="#é—®é¢˜-3-python-è™šæ‹Ÿç¯å¢ƒåˆ›å»ºå¤±è´¥" aria-label="Permalink to &quot;é—®é¢˜ 3: Python è™šæ‹Ÿç¯å¢ƒåˆ›å»ºå¤±è´¥&quot;">â€‹</a></h4><p><strong>ç—‡çŠ¶</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">è™šæ‹Ÿç¯å¢ƒåˆ›å»ºå¤±è´¥:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Pythonè§£é‡Šå™¨æœªæ‰¾åˆ°</span></span></code></pre></div><p><strong>è™šæ‹Ÿç¯å¢ƒç®¡ç†</strong>:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> create_virtual_environment</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, target_dir: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; Tuple[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;åˆ›å»ºPythonè™šæ‹Ÿç¯å¢ƒ&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    venv_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.join(target_dir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;venv&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.exists(venv_path):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        shutil.rmtree(venv_path)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ¸…ç†æ—§ç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    venv.create(venv_path, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">with_pip</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # éªŒè¯è™šæ‹Ÿç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> platform.system() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Windows&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        python_exe </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.join(venv_path, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;python.exe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        python_exe </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.join(venv_path, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bin&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;python&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.exists(python_exe):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        raise</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è™šæ‹Ÿç¯å¢ƒPythonè§£é‡Šå™¨æœªæ‰¾åˆ°&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, venv_path</span></span></code></pre></div><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><ol><li><strong>Python ç¯å¢ƒæ£€æŸ¥</strong>: ç¡®ä¿ Python 3.8+ å·²å®‰è£…å¹¶æ·»åŠ åˆ° PATH</li><li><strong>æƒé™é—®é¢˜</strong>: ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œç¨‹åº</li><li><strong>è·¯å¾„é—®é¢˜</strong>: é€‰æ‹©ç”¨æˆ·ç›®å½•ä½œä¸ºå®‰è£…è·¯å¾„</li></ol><h4 id="é—®é¢˜-4-ä¾èµ–åŒ…å®‰è£…å¤±è´¥" tabindex="-1">é—®é¢˜ 4: ä¾èµ–åŒ…å®‰è£…å¤±è´¥ <a class="header-anchor" href="#é—®é¢˜-4-ä¾èµ–åŒ…å®‰è£…å¤±è´¥" aria-label="Permalink to &quot;é—®é¢˜ 4: ä¾èµ–åŒ…å®‰è£…å¤±è´¥&quot;">â€‹</a></h4><p><strong>ç—‡çŠ¶</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ERROR:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Could</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> not</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> find</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> a</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> that</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> satisfies</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> the</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> requirement</span></span></code></pre></div><p><strong>å¤šé•œåƒæºç­–ç•¥</strong>:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">pypi_mirrors </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;https://pypi.tuna.tsinghua.edu.cn/simple&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;https://pypi.org/simple&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;https://mirrors.aliyun.com/pypi/simple&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;https://pypi.douban.com/simple&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> install_dependencies_in_venv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, venv_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, requirements_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;å¤šé•œåƒæºä¾èµ–å®‰è£…&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i, mirror </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> enumerate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pypi_mirrors, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        cmd </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            pip_exe, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;install&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;-r&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, requirements_path,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;-i&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, mirror</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> run_command_with_output(cmd, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ä½¿ç”¨é•œåƒæº</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">i</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">å®‰è£…ä¾èµ–&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # æ‰€æœ‰é•œåƒæºéƒ½å¤±è´¥</span></span></code></pre></div><h3 id="ç«¯å£å†²çªé—®é¢˜" tabindex="-1">ç«¯å£å†²çªé—®é¢˜ <a class="header-anchor" href="#ç«¯å£å†²çªé—®é¢˜" aria-label="Permalink to &quot;ç«¯å£å†²çªé—®é¢˜&quot;">â€‹</a></h3><h4 id="é—®é¢˜-5-ç«¯å£å ç”¨" tabindex="-1">é—®é¢˜ 5: ç«¯å£å ç”¨ <a class="header-anchor" href="#é—®é¢˜-5-ç«¯å£å ç”¨" aria-label="Permalink to &quot;é—®é¢˜ 5: ç«¯å£å ç”¨&quot;">â€‹</a></h4><p><strong>ç—‡çŠ¶</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ç«¯å£</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8000</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> å·²è¢«å ç”¨</span></span></code></pre></div><p><strong>ç«¯å£å†²çªæ£€æµ‹</strong>:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> is_port_available</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, port: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;æ£€æŸ¥ç«¯å£æ˜¯å¦å¯ç”¨&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">RESERVED_PORTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # ä½¿ç”¨socketæ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        with</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> socket.socket(socket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AF_INET</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, socket.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">SOCK_STREAM</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sock:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            sock.settimeout(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sock.connect_ex((</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;localhost&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, port))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> find_available_port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, port_type: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, base_port: Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;æŸ¥æ‰¾å¯ç”¨ç«¯å£&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    start_port, _ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">COMMON_PORTS</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[port_type]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    search_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> base_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">or</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> start_port</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # å°è¯•ä»åŸºç¡€ç«¯å£å¼€å§‹æŸ¥æ‰¾</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> offset </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">100</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        test_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> search_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> offset</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.is_port_available(test_port):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> test_port</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # æ‰©å±•æœç´¢èŒƒå›´</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1024</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">65535</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.is_port_available(port):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> port</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    raise</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> RuntimeError</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æ— æ³•æ‰¾åˆ°å¯ç”¨ç«¯å£&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><ol><li><strong>è‡ªåŠ¨é‡è¯•</strong>: ç³»ç»Ÿä¼šè‡ªåŠ¨å¯»æ‰¾ä¸‹ä¸€ä¸ªå¯ç”¨ç«¯å£</li><li><strong>æ‰‹åŠ¨é‡Šæ”¾</strong>: ç»“æŸå ç”¨ç«¯å£çš„è¿›ç¨‹</li><li><strong>ç«¯å£é…ç½®</strong>: ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£è®¾ç½®</li></ol><h3 id="é…ç½®æ–‡ä»¶é—®é¢˜" tabindex="-1">é…ç½®æ–‡ä»¶é—®é¢˜ <a class="header-anchor" href="#é…ç½®æ–‡ä»¶é—®é¢˜" aria-label="Permalink to &quot;é…ç½®æ–‡ä»¶é—®é¢˜&quot;">â€‹</a></h3><h4 id="é—®é¢˜-6-é…ç½®æ–‡ä»¶ç”Ÿæˆå¤±è´¥" tabindex="-1">é—®é¢˜ 6: é…ç½®æ–‡ä»¶ç”Ÿæˆå¤±è´¥ <a class="header-anchor" href="#é—®é¢˜-6-é…ç½®æ–‡ä»¶ç”Ÿæˆå¤±è´¥" aria-label="Permalink to &quot;é—®é¢˜ 6: é…ç½®æ–‡ä»¶ç”Ÿæˆå¤±è´¥&quot;">â€‹</a></h4><p><strong>ç—‡çŠ¶</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">é…ç½®æ–‡ä»¶è®¾ç½®å¤±è´¥:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> æ¨¡æ¿æ–‡ä»¶ä¸å­˜åœ¨</span></span></code></pre></div><p><strong>é…ç½®æ–‡ä»¶ç”Ÿæˆå™¨</strong>:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> setup_config_files</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, deploy_config: Dict, bot_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      adapter_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, napcat_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                      mongodb_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, webui_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;è®¾ç½®é…ç½®æ–‡ä»¶&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        config_dir </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.join(bot_path, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;config&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        template_dir </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.join(bot_path, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;template&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        bot_config_template </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.join(template_dir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bot_config_template.toml&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        bot_config_target </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.join(config_dir, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bot_config.toml&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.exists(bot_config_template):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            shutil.copy2(bot_config_template, bot_config_target)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            logger.warning(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æœªæ‰¾åˆ°æ¨¡æ¿æ–‡ä»¶: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bot_config_template</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        logger.error(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;é…ç½®æ–‡ä»¶è®¾ç½®å¤±è´¥&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e))</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span></code></pre></div><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><ol><li><strong>æ¨¡æ¿æ£€æŸ¥</strong>: ç¡®è®¤ template ç›®å½•å’Œæ¨¡æ¿æ–‡ä»¶å­˜åœ¨</li><li><strong>æƒé™æ£€æŸ¥</strong>: ç¡®ä¿æœ‰å†™å…¥é…ç½®ç›®å½•çš„æƒé™</li><li><strong>æ‰‹åŠ¨é…ç½®</strong>: å¤åˆ¶æ¨¡æ¿æ–‡ä»¶å¹¶æ‰‹åŠ¨ä¿®æ”¹</li></ol><h3 id="è¿è¡Œå¯åŠ¨é—®é¢˜" tabindex="-1">è¿è¡Œå¯åŠ¨é—®é¢˜ <a class="header-anchor" href="#è¿è¡Œå¯åŠ¨é—®é¢˜" aria-label="Permalink to &quot;è¿è¡Œå¯åŠ¨é—®é¢˜&quot;">â€‹</a></h3><h4 id="é—®é¢˜-7-bot-å¯åŠ¨å¤±è´¥" tabindex="-1">é—®é¢˜ 7: Bot å¯åŠ¨å¤±è´¥ <a class="header-anchor" href="#é—®é¢˜-7-bot-å¯åŠ¨å¤±è´¥" aria-label="Permalink to &quot;é—®é¢˜ 7: Bot å¯åŠ¨å¤±è´¥&quot;">â€‹</a></h4><p><strong>ç—‡çŠ¶</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Bot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> å¯åŠ¨å¤±è´¥ï¼šæ¨¡å—å¯¼å…¥é”™è¯¯</span></span></code></pre></div><p><strong>å¯åŠ¨éªŒè¯æœºåˆ¶</strong>:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> validate_configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, config: Dict[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Any]) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;éªŒè¯é…ç½®çš„æœ‰æ•ˆæ€§&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    errors </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # éªŒè¯Botè·¯å¾„</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    bot_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bot_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MaiBot&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bot_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;MoFox_bot&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        mai_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mofox_path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        mai_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mai_path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    valid, msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> validate_path(mai_path, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">check_file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bot.py&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> valid:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        errors.append(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Botè·¯å¾„: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # éªŒè¯è™šæ‹Ÿç¯å¢ƒ</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    venv_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;venv_path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> venv_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">and</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.exists(venv_path):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        errors.append(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;è™šæ‹Ÿç¯å¢ƒè·¯å¾„ä¸å­˜åœ¨&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> errors</span></span></code></pre></div><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><ol><li><strong>ä¾èµ–æ£€æŸ¥</strong>: ç¡®è®¤æ‰€æœ‰ä¾èµ–åŒ…å·²æ­£ç¡®å®‰è£…</li><li><strong>ç¯å¢ƒæ£€æŸ¥</strong>: éªŒè¯è™šæ‹Ÿç¯å¢ƒå’Œ Python è·¯å¾„</li><li><strong>é…ç½®æ£€æŸ¥</strong>: ç¡®è®¤æ‰€æœ‰é…ç½®æ–‡ä»¶æ­£ç¡®</li></ol><h4 id="é—®é¢˜-8-qq-ç™»å½•å¤±è´¥" tabindex="-1">é—®é¢˜ 8: QQ ç™»å½•å¤±è´¥ <a class="header-anchor" href="#é—®é¢˜-8-qq-ç™»å½•å¤±è´¥" aria-label="Permalink to &quot;é—®é¢˜ 8: QQ ç™»å½•å¤±è´¥&quot;">â€‹</a></h4><p><strong>ç—‡çŠ¶</strong>:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">QQ</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ç™»å½•å¤±è´¥ï¼šè®¾å¤‡éªŒè¯</span></span></code></pre></div><p><strong>NapCat è¿æ¥è¯Šæ–­</strong>:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> check_napcat_connection</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, napcat_path: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;æ£€æŸ¥NapCatè¿æ¥çŠ¶æ€&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # æ£€æŸ¥NapCatè¿›ç¨‹æ˜¯å¦è¿è¡Œ</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> check_process(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NapCatWinBootMain.exe&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # å°è¯•è¿æ¥WebSocket</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> websocket</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ws </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> websocket.create_connection(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ws://127.0.0.1:8090&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ws.close()</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    except</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Exception</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> as</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        logger.warning(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NapCatè¿æ¥æ£€æŸ¥å¤±è´¥&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">error</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(e))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span></code></pre></div><p><strong>è§£å†³æ–¹æ¡ˆ</strong>:</p><ol><li><strong>è´¦å·å®‰å…¨</strong>: ä½¿ç”¨ä¸“é—¨çš„ QQ å°å·é¿å…ä¸»è´¦å·é£é™©</li><li><strong>è®¾å¤‡éªŒè¯</strong>: æŒ‰ç…§ NapCat æç¤ºå®Œæˆè®¾å¤‡éªŒè¯</li><li><strong>ç‰ˆæœ¬æ›´æ–°</strong>: æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬çš„ NapCat</li><li><strong>ç½‘ç»œæ£€æŸ¥</strong>: ç¡®ä¿ç½‘ç»œè¿æ¥ç¨³å®š</li></ol><h2 id="âš™ï¸-é«˜çº§é…ç½®" tabindex="-1">âš™ï¸ é«˜çº§é…ç½® <a class="header-anchor" href="#âš™ï¸-é«˜çº§é…ç½®" aria-label="Permalink to &quot;âš™ï¸ é«˜çº§é…ç½®&quot;">â€‹</a></h2><h3 id="ä»£ç†é…ç½®ç³»ç»Ÿ" tabindex="-1">ä»£ç†é…ç½®ç³»ç»Ÿ <a class="header-anchor" href="#ä»£ç†é…ç½®ç³»ç»Ÿ" aria-label="Permalink to &quot;ä»£ç†é…ç½®ç³»ç»Ÿ&quot;">â€‹</a></h3><h4 id="ä¼ä¸šç½‘ç»œç¯å¢ƒé€‚é…" tabindex="-1">ä¼ä¸šç½‘ç»œç¯å¢ƒé€‚é… <a class="header-anchor" href="#ä¼ä¸šç½‘ç»œç¯å¢ƒé€‚é…" aria-label="Permalink to &quot;ä¼ä¸šç½‘ç»œç¯å¢ƒé€‚é…&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProxyManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;ä»£ç†ç®¡ç†å™¨ - æ”¯æŒHTTPå’ŒSOCKS5ä»£ç†&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.proxy_config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;socks5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">None</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> configure_proxy</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, proxy_type: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, host: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, port: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                     username: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, password: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;é…ç½®ä»£ç†æœåŠ¡å™¨&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> username </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">and</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> password:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            proxy_url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">username</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">password</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">@</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">host</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            proxy_url </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">host</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">port</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> proxy_type.lower() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.proxy_config[proxy_type.lower()] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">proxy_url</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        elif</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> proxy_type.lower() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;socks5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.proxy_config[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;socks5&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;socks5://</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">proxy_url</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_proxies</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self) -&gt; Dict[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;è·å–ä»£ç†é…ç½®&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {k: v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> k, v </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.proxy_config.items() </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> v}</span></span></code></pre></div><p><strong>é…ç½®æ–¹æ³•</strong>:</p><ol><li><strong>ç³»ç»Ÿä»£ç†</strong>: Windows è®¾ç½® â†’ ç½‘ç»œå’Œ Internet â†’ ä»£ç†</li><li><strong>ç¨‹åºå†…ä»£ç†</strong>: åœ¨è®¾ç½®ä¸­é…ç½® HTTP/SOCKS5 ä»£ç†</li><li><strong>ç¯å¢ƒå˜é‡</strong>: è®¾ç½® <code>HTTP_PROXY</code> å’Œ <code>HTTPS_PROXY</code> ç¯å¢ƒå˜é‡</li></ol><h3 id="å¤šå®ä¾‹éƒ¨ç½²æ¶æ„" tabindex="-1">å¤šå®ä¾‹éƒ¨ç½²æ¶æ„ <a class="header-anchor" href="#å¤šå®ä¾‹éƒ¨ç½²æ¶æ„" aria-label="Permalink to &quot;å¤šå®ä¾‹éƒ¨ç½²æ¶æ„&quot;">â€‹</a></h3><h4 id="å®ä¾‹éš”ç¦»æœºåˆ¶" tabindex="-1">å®ä¾‹éš”ç¦»æœºåˆ¶ <a class="header-anchor" href="#å®ä¾‹éš”ç¦»æœºåˆ¶" aria-label="Permalink to &quot;å®ä¾‹éš”ç¦»æœºåˆ¶&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> InstanceMultiLauncher</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;å®ä¾‹å¤šå¼€ç®¡ç†å™¨&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> create_multi_instance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, base_config: Dict[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Any], instance_name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;åˆ›å»ºå¤šå¼€å®ä¾‹&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        instance_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(uuid.uuid4())[:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # æ™ºèƒ½ç«¯å£åˆ†é…</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        main_port, secondary_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> port_manager.get_next_instance_port(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            base_config[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bot_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">], base_config</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        multi_instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: instance_id,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: instance_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">or</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;å¤šå¼€å®ä¾‹_</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">instance_id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;bot_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: base_config[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bot_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;ports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &quot;main_port&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: main_port,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                &quot;secondary_port&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: secondary_port</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            },</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;created&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.multi_instances[instance_id] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> multi_instance</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance_id</span></span></code></pre></div><p><strong>éƒ¨ç½²ç­–ç•¥</strong>:</p><ol><li><strong>ç«¯å£éš”ç¦»</strong>: æ¯ä¸ªå®ä¾‹åˆ†é…ç‹¬ç«‹çš„ç«¯å£ç»„åˆ</li><li><strong>é…ç½®éš”ç¦»</strong>: å®ä¾‹é—´é…ç½®äº’ä¸å½±å“</li><li><strong>è¿›ç¨‹éš”ç¦»</strong>: æ¯ä¸ªå®ä¾‹è¿è¡Œåœ¨ç‹¬ç«‹çš„è¿›ç¨‹ç©ºé—´ä¸­</li></ol><h3 id="æ€§èƒ½ä¼˜åŒ–ç­–ç•¥" tabindex="-1">æ€§èƒ½ä¼˜åŒ–ç­–ç•¥ <a class="header-anchor" href="#æ€§èƒ½ä¼˜åŒ–ç­–ç•¥" aria-label="Permalink to &quot;æ€§èƒ½ä¼˜åŒ–ç­–ç•¥&quot;">â€‹</a></h3><h4 id="èµ„æºç®¡ç†ä¼˜åŒ–" tabindex="-1">èµ„æºç®¡ç†ä¼˜åŒ– <a class="header-anchor" href="#èµ„æºç®¡ç†ä¼˜åŒ–" aria-label="Permalink to &quot;èµ„æºç®¡ç†ä¼˜åŒ–&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ResourceOptimizer</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;èµ„æºä¼˜åŒ–å™¨&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> optimize_memory_usage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;å†…å­˜ä½¿ç”¨ä¼˜åŒ–&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> gc</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # å¼ºåˆ¶åƒåœ¾å›æ”¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        gc.collect()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # æ¸…ç†ç¼“å­˜</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> hasattr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;_cache&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._cache.clear()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> optimize_disk_usage</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;ç£ç›˜ä½¿ç”¨ä¼˜åŒ–&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # æ—¥å¿—è½®è½¬</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._rotate_logs()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # æ¸…ç†ä¸´æ—¶æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._cleanup_temp_files()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # å‹ç¼©æ—§æ•°æ®</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._compress_old_data()</span></span></code></pre></div><p><strong>ä¼˜åŒ–æªæ–½</strong>:</p><ol><li><p><strong>å†…å­˜ä¼˜åŒ–</strong>:</p><ul><li>åŠæ—¶é‡Šæ”¾ä¸éœ€è¦çš„å¯¹è±¡</li><li>ä½¿ç”¨å¼±å¼•ç”¨é¿å…å¾ªç¯å¼•ç”¨</li><li>é…ç½®åˆç†çš„ç¼“å­˜å¤§å°</li></ul></li><li><p><strong>å­˜å‚¨ä¼˜åŒ–</strong>:</p><ul><li>ä½¿ç”¨ SSD æå‡ I/O æ€§èƒ½</li><li>å®šæœŸæ¸…ç†æ—¥å¿—å’Œä¸´æ—¶æ–‡ä»¶</li><li>å¯ç”¨æ—¥å¿—è½®è½¬æœºåˆ¶</li></ul></li><li><p><strong>ç½‘ç»œä¼˜åŒ–</strong>:</p><ul><li>é…ç½®æœ¬åœ° PyPI é•œåƒ</li><li>ä½¿ç”¨ CDN åŠ é€Ÿä¸‹è½½</li><li>å¯ç”¨è¿æ¥å¤ç”¨</li></ul></li></ol><h3 id="ç›‘æ§ä¸ç»´æŠ¤ç³»ç»Ÿ" tabindex="-1">ç›‘æ§ä¸ç»´æŠ¤ç³»ç»Ÿ <a class="header-anchor" href="#ç›‘æ§ä¸ç»´æŠ¤ç³»ç»Ÿ" aria-label="Permalink to &quot;ç›‘æ§ä¸ç»´æŠ¤ç³»ç»Ÿ&quot;">â€‹</a></h3><h4 id="å¥åº·æ£€æŸ¥æœºåˆ¶" tabindex="-1">å¥åº·æ£€æŸ¥æœºåˆ¶ <a class="header-anchor" href="#å¥åº·æ£€æŸ¥æœºåˆ¶" aria-label="Permalink to &quot;å¥åº·æ£€æŸ¥æœºåˆ¶&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HealthMonitor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;å¥åº·ç›‘æ§å™¨&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> check_instance_health</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, instance_id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; Dict[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Any]:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;æ£€æŸ¥å®ä¾‹å¥åº·çŠ¶æ€&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.multi_instances.get(instance_id)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;not_found&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        health_status </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;healthy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;cpu_usage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._get_cpu_usage(instance_id),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;memory_usage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._get_memory_usage(instance_id),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;disk_usage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._get_disk_usage(instance_id),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;network_status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._check_network_connectivity(),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;last_check&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: datetime.now().isoformat()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # æ£€æŸ¥å…³é”®æŒ‡æ ‡</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> health_status[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cpu_usage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 80</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            health_status[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;warning&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> health_status[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;memory_usage&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 90</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            health_status[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;critical&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> health_status</span></span></code></pre></div><p><strong>ç›‘æ§æŒ‡æ ‡</strong>:</p><ol><li><strong>ç³»ç»Ÿèµ„æº</strong>: CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨ç‡</li><li><strong>ç½‘ç»œçŠ¶æ€</strong>: è¿æ¥å»¶è¿Ÿã€ä¸¢åŒ…ç‡</li><li><strong>æœåŠ¡çŠ¶æ€</strong>: è¿›ç¨‹å­˜æ´»ã€ç«¯å£å¯ç”¨æ€§</li><li><strong>ä¸šåŠ¡æŒ‡æ ‡</strong>: å“åº”æ—¶é—´ã€é”™è¯¯ç‡</li></ol><h4 id="è‡ªåŠ¨å¤‡ä»½ç­–ç•¥" tabindex="-1">è‡ªåŠ¨å¤‡ä»½ç­–ç•¥ <a class="header-anchor" href="#è‡ªåŠ¨å¤‡ä»½ç­–ç•¥" aria-label="Permalink to &quot;è‡ªåŠ¨å¤‡ä»½ç­–ç•¥&quot;">â€‹</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> BackupManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;å¤‡ä»½ç®¡ç†å™¨&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> create_backup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, instance_id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, backup_type: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;incremental&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;åˆ›å»ºå¤‡ä»½&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        timestamp </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> datetime.now().strftime(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;%Y%m</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">%d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">_%H%M%S&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        backup_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">instance_id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">_</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">backup_type</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">_</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">timestamp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.multi_instances[instance_id]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> backup_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;full&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # å…¨é‡å¤‡ä»½</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._create_full_backup(instance, backup_name)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        elif</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> backup_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;incremental&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            # å¢é‡å¤‡ä»½</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._create_incremental_backup(instance, backup_name)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> backup_name</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _create_full_backup</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, instance: Dict, backup_name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;åˆ›å»ºå…¨é‡å¤‡ä»½&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        backup_dir </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;backups/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">backup_name</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        os.makedirs(backup_dir, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">exist_ok</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # å¤‡ä»½é…ç½®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        config_files </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;config/*.toml&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.env&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pattern </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config_files:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            shutil.copy2(pattern, backup_dir)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # å¤‡ä»½æ•°æ®æ–‡ä»¶</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        data_files </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;data/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;logs/*&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pattern </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> data_files:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.exists(pattern):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                shutil.copytree(pattern, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">backup_dir</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">/</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">os.path.basename(pattern)</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p><strong>å¤‡ä»½ç­–ç•¥</strong>:</p><ol><li><strong>å…¨é‡å¤‡ä»½</strong>: å®šæœŸåˆ›å»ºå®Œæ•´å¤‡ä»½</li><li><strong>å¢é‡å¤‡ä»½</strong>: æ—¥å¸¸å¢é‡å¤‡ä»½èŠ‚çœç©ºé—´</li><li><strong>å¼‚åœ°å¤‡ä»½</strong>: é‡è¦æ•°æ®å¼‚åœ°å­˜å‚¨</li><li><strong>è‡ªåŠ¨æ¸…ç†</strong>: å®šæœŸæ¸…ç†è¿‡æœŸå¤‡ä»½</li></ol><hr><h2 id="ğŸ“-è·å–å¸®åŠ©" tabindex="-1">ğŸ“ è·å–å¸®åŠ© <a class="header-anchor" href="#ğŸ“-è·å–å¸®åŠ©" aria-label="Permalink to &quot;ğŸ“ è·å–å¸®åŠ©&quot;">â€‹</a></h2><h3 id="å®˜æ–¹èµ„æº" tabindex="-1">å®˜æ–¹èµ„æº <a class="header-anchor" href="#å®˜æ–¹èµ„æº" aria-label="Permalink to &quot;å®˜æ–¹èµ„æº&quot;">â€‹</a></h3>`,97)),n(k,{title:"ğŸ“š MaiBot å®˜æ–¹æ–‡æ¡£",link:"https://docs.mai-mai.org"},{default:h(()=>[...s[30]||(s[30]=[a(" MaiBot å®Œæ•´æŠ€æœ¯æ–‡æ¡£å’ŒAPIå‚è€ƒ ",-1)])]),_:1}),n(k,{title:"ğŸ”§ MoFox_bot GitHub ä»“åº“",link:"https://github.com/MoFox-Studio/MoFox_Bot"},{default:h(()=>[...s[31]||(s[31]=[a(" MoFox_bot æºç ã€é—®é¢˜åé¦ˆå’ŒåŠŸèƒ½è¯·æ±‚ ",-1)])]),_:1}),n(k,{title:"ğŸ› MaiCore Start Issues",link:"https://github.com/MaiM-with-u/MaiCore-Start/issues"},{default:h(()=>[...s[32]||(s[32]=[a(" æäº¤BugæŠ¥å‘Šå’ŒåŠŸèƒ½å»ºè®® ",-1)])]),_:1}),s[46]||(s[46]=l(`<h3 id="ç¤¾åŒºæ”¯æŒ" tabindex="-1">ç¤¾åŒºæ”¯æŒ <a class="header-anchor" href="#ç¤¾åŒºæ”¯æŒ" aria-label="Permalink to &quot;ç¤¾åŒºæ”¯æŒ&quot;">â€‹</a></h3><ul><li><strong>æŠ€æœ¯äº¤æµç¾¤</strong>: åŠ å…¥ MaiBot/MoFox_bot æŠ€æœ¯äº¤æµç¾¤</li><li><strong>åœ¨çº¿è®ºå›</strong>: å‚ä¸æŠ€æœ¯è®¨è®ºå’Œç»éªŒåˆ†äº«</li><li><strong>è§†é¢‘æ•™ç¨‹</strong>: è§‚çœ‹éƒ¨ç½²å’Œé…ç½®è§†é¢‘æŒ‡å—</li></ul><h3 id="é—®é¢˜åé¦ˆæŒ‡å—" tabindex="-1">é—®é¢˜åé¦ˆæŒ‡å— <a class="header-anchor" href="#é—®é¢˜åé¦ˆæŒ‡å—" aria-label="Permalink to &quot;é—®é¢˜åé¦ˆæŒ‡å—&quot;">â€‹</a></h3><p>æäº¤é—®é¢˜æ—¶è¯·æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># ç³»ç»Ÿç¯å¢ƒä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">æ“ä½œç³»ç»Ÿ:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Windows</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 11</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Pythonç‰ˆæœ¬:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3.11.5</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">MaiCore</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Startç‰ˆæœ¬:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v4.1.2-beta</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é”™è¯¯ä¿¡æ¯</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">éƒ¨ç½²å¤±è´¥:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ç½‘ç»œè¿æ¥è¶…æ—¶</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">é”™è¯¯æ—¥å¿—:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [è¯¦ç»†æ—¥å¿—å†…å®¹]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ“ä½œæ­¥éª¤</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> å¯åŠ¨</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MaiCore</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Start</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> é€‰æ‹©éƒ¨ç½²æ–°å®ä¾‹</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> é€‰æ‹©</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> MaiBot</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v0.11.6</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">4.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> é…ç½®ç»„ä»¶æ—¶å‡ºé”™</span></span></code></pre></div><hr><h2 id="ğŸ“„-æ›´æ–°æ—¥å¿—" tabindex="-1">ğŸ“„ æ›´æ–°æ—¥å¿— <a class="header-anchor" href="#ğŸ“„-æ›´æ–°æ—¥å¿—" aria-label="Permalink to &quot;ğŸ“„ æ›´æ–°æ—¥å¿—&quot;">â€‹</a></h2><h3 id="v4-1-2-beta-2024-12-17" tabindex="-1">v4.1.2-beta (2024-12-17) <a class="header-anchor" href="#v4-1-2-beta-2024-12-17" aria-label="Permalink to &quot;v4.1.2-beta (2024-12-17)&quot;">â€‹</a></h3><ul><li>âœ¨ <strong>æ–°å¢åŠŸèƒ½</strong>: å®Œæ•´æ”¯æŒ MoFox_bot éƒ¨ç½²</li><li>ğŸ—ï¸ <strong>æ¶æ„ä¼˜åŒ–</strong>: æ¨¡å—åŒ–éƒ¨ç½²å™¨è®¾è®¡</li><li>ğŸ”§ <strong>éƒ¨ç½²å¢å¼º</strong>: æ™ºèƒ½ç‰ˆæœ¬æ£€æµ‹å’Œç»„ä»¶é€‰æ‹©</li><li>ğŸ“Š <strong>ç›‘æ§æ”¹è¿›</strong>: å®æ—¶éƒ¨ç½²è¿›åº¦æ˜¾ç¤º</li><li>ğŸ› <strong>é—®é¢˜ä¿®å¤</strong>: ä¿®å¤ç«¯å£å†²çªå’Œä¾èµ–å®‰è£…é—®é¢˜</li><li>ğŸ“š <strong>æ–‡æ¡£å®Œå–„</strong>: è¯¦ç»†çš„éƒ¨ç½²å’Œé…ç½®æ–‡æ¡£</li></ul><h3 id="v4-1-1-2024-11-15" tabindex="-1">v4.1.1 (2024-11-15) <a class="header-anchor" href="#v4-1-1-2024-11-15" aria-label="Permalink to &quot;v4.1.1 (2024-11-15)&quot;">â€‹</a></h3><ul><li>ğŸš€ <strong>æ€§èƒ½æå‡</strong>: éƒ¨ç½²é€Ÿåº¦æå‡ 40%</li><li>ğŸ’¾ <strong>ç¼“å­˜ä¼˜åŒ–</strong>: æ”¹è¿›ç‰ˆæœ¬ä¿¡æ¯ç¼“å­˜æœºåˆ¶</li><li>ğŸ”’ <strong>å®‰å…¨å¢å¼º</strong>: åŠ å¼ºé…ç½®æ–‡ä»¶æƒé™ç®¡ç†</li><li>ğŸŒ <strong>ç½‘ç»œä¼˜åŒ–</strong>: å¤šé•œåƒæºè‡ªåŠ¨åˆ‡æ¢</li></ul><h3 id="v4-1-0-2024-10-20" tabindex="-1">v4.1.0 (2024-10-20) <a class="header-anchor" href="#v4-1-0-2024-10-20" aria-label="Permalink to &quot;v4.1.0 (2024-10-20)&quot;">â€‹</a></h3><ul><li>ğŸ‰ <strong>é¦–æ¬¡å‘å¸ƒ</strong>: MaiCore Start éƒ¨ç½²ç³»ç»Ÿ</li><li>ğŸ¤– <strong>Botæ”¯æŒ</strong>: å®Œæ•´æ”¯æŒ MaiBot éƒ¨ç½²</li><li>ğŸ”Œ <strong>ç»„ä»¶é›†æˆ</strong>: NapCatã€WebUIã€MongoDB è‡ªåŠ¨å®‰è£…</li><li>ğŸ“± <strong>ç”¨æˆ·ç•Œé¢</strong>: å‹å¥½çš„å‘½ä»¤è¡Œç•Œé¢</li></ul><hr><h2 id="ğŸ“œ-æŠ€æœ¯æ¶æ„" tabindex="-1">ğŸ“œ æŠ€æœ¯æ¶æ„ <a class="header-anchor" href="#ğŸ“œ-æŠ€æœ¯æ¶æ„" aria-label="Permalink to &quot;ğŸ“œ æŠ€æœ¯æ¶æ„&quot;">â€‹</a></h2><h3 id="æ ¸å¿ƒæŠ€æœ¯æ ˆ" tabindex="-1">æ ¸å¿ƒæŠ€æœ¯æ ˆ <a class="header-anchor" href="#æ ¸å¿ƒæŠ€æœ¯æ ˆ" aria-label="Permalink to &quot;æ ¸å¿ƒæŠ€æœ¯æ ˆ&quot;">â€‹</a></h3><ul><li><strong>è¯­è¨€</strong>: Python 3.8+</li><li><strong>UIæ¡†æ¶</strong>: Rich (å‘½ä»¤è¡Œç•Œé¢)</li><li><strong>ç½‘ç»œè¯·æ±‚</strong>: Requests + HTTPX</li><li><strong>è¿›ç¨‹ç®¡ç†</strong>: psutil</li><li><strong>é…ç½®ç®¡ç†</strong>: TOML</li><li><strong>æ—¥å¿—ç³»ç»Ÿ</strong>: structlog</li><li><strong>åŒ…ç®¡ç†</strong>: pip + uv (å¯é€‰)</li></ul><h3 id="è®¾è®¡æ¨¡å¼" tabindex="-1">è®¾è®¡æ¨¡å¼ <a class="header-anchor" href="#è®¾è®¡æ¨¡å¼" aria-label="Permalink to &quot;è®¾è®¡æ¨¡å¼&quot;">â€‹</a></h3><ul><li><strong>ç­–ç•¥æ¨¡å¼</strong>: ä¸åŒ Bot ç±»å‹çš„å·®å¼‚åŒ–éƒ¨ç½²</li><li><strong>å·¥å‚æ¨¡å¼</strong>: ç»„ä»¶åˆ›å»ºå’Œç®¡ç†</li><li><strong>è§‚å¯Ÿè€…æ¨¡å¼</strong>: éƒ¨ç½²è¿›åº¦ç›‘æ§</li><li><strong>å•ä¾‹æ¨¡å¼</strong>: å…¨å±€é…ç½®ç®¡ç†</li></ul><hr><p><strong>æ„Ÿè°¢ä½¿ç”¨ MaiCore Start éƒ¨ç½²ç³»ç»Ÿï¼</strong></p><p>é€šè¿‡è‡ªåŠ¨åŒ–çš„éƒ¨ç½²æµç¨‹ã€æ™ºèƒ½çš„é…ç½®ç®¡ç†å’Œå¼ºå¤§çš„ç›‘æ§åŠŸèƒ½ï¼ŒMaiCore Start ä¸º Bot å¼€å‘è€…æä¾›äº†ä¸“ä¸šçº§çš„éƒ¨ç½²è§£å†³æ–¹æ¡ˆã€‚å¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªå·¥å…·æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç»™é¡¹ç›®ç‚¹ä¸ªæ˜Ÿâ­ï¼</p>`,22)),i("h2",b,[n(t,{href:"#ğŸ“‹-ç›®å½•"},{default:h(()=>[...s[33]||(s[33]=[a("TOP",-1)])]),_:1}),s[34]||(s[34]=a()),s[35]||(s[35]=i("a",{class:"header-anchor",href:"#top","aria-label":'Permalink to "[TOP](#ğŸ“‹-ç›®å½•)"'},"â€‹",-1))]),n(o)])}const T=F(u,[["render",D]]);export{w as __pageData,T as default};
