<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MaiCore Start 启动指南 | MCStart</title>
    <meta name="description" content="基于Python的类人思考智能体的启动器">
    <meta name="generator" content="VitePress v1.6.4">
    <link rel="preload stylesheet" href="/assets/style.DzYGwsfV.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.d9a1e19d.js"></script>
    <script type="module" src="/assets/app.BbC4X-B9.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.DwOsETNj.js">
    <link rel="modulepreload" href="/assets/chunks/theme.C4pS0W8M.js">
    <link rel="modulepreload" href="/assets/chunks/katex.ChWnQ-fc.js">
    <link rel="modulepreload" href="/assets/chunks/dagre-2BBEFEWP.ClFDPrQ8.js">
    <link rel="modulepreload" href="/assets/chunks/c4Diagram-AAMF2YG6.CjbB29n1.js">
    <link rel="modulepreload" href="/assets/chunks/flowDiagram-THRYKUMA.Ch21QbxS.js">
    <link rel="modulepreload" href="/assets/chunks/erDiagram-HZWUO2LU.CR0b4TkE.js">
    <link rel="modulepreload" href="/assets/chunks/gitGraphDiagram-OJR772UL.D8zXRysk.js">
    <link rel="modulepreload" href="/assets/chunks/ganttDiagram-WV7ZQ7D5.ByAxAJs2.js">
    <link rel="modulepreload" href="/assets/chunks/infoDiagram-DDUCL6P7.DJVOQ3Na.js">
    <link rel="modulepreload" href="/assets/chunks/pieDiagram-DBDJKBY4.DSuO60HA.js">
    <link rel="modulepreload" href="/assets/chunks/quadrantDiagram-YPSRARAO.CcSACXda.js">
    <link rel="modulepreload" href="/assets/chunks/xychartDiagram-FDP5SA34.ouurCwtP.js">
    <link rel="modulepreload" href="/assets/chunks/requirementDiagram-EGVEC5DT.CHYCce4H.js">
    <link rel="modulepreload" href="/assets/chunks/sequenceDiagram-4MX5Z3NR.C7ettTrG.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-3BZAVTQC.CRzpdR8S.js">
    <link rel="modulepreload" href="/assets/chunks/classDiagram-v2-QTMF73CY.CRzpdR8S.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-UUKSUZ4H.CY9Sajj6.js">
    <link rel="modulepreload" href="/assets/chunks/stateDiagram-v2-EYPG3UTE.DT8mAAj9.js">
    <link rel="modulepreload" href="/assets/chunks/journeyDiagram-FFXJYRFH.B2RiOVRD.js">
    <link rel="modulepreload" href="/assets/chunks/timeline-definition-3HZDQTIS.CETERQ6u.js">
    <link rel="modulepreload" href="/assets/chunks/mindmap-definition-LNHGMQRG.BRZjt-S3.js">
    <link rel="modulepreload" href="/assets/chunks/kanban-definition-KOZQBZVT.CQYgcBRU.js">
    <link rel="modulepreload" href="/assets/chunks/sankeyDiagram-HRAUVNP4.ChVOL7ZR.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-GUPCWM2R.Ckcopehv.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-RP2FKANI.CQNHy1eN.js">
    <link rel="modulepreload" href="/assets/chunks/blockDiagram-ZYB65J3Q.C9iFWyIn.js">
    <link rel="modulepreload" href="/assets/chunks/architectureDiagram-KFL7JDKH.Dz2cjcOx.js">
    <link rel="modulepreload" href="/assets/chunks/diagram-4IRLE6MV.DTgo3dF9.js">
    <link rel="modulepreload" href="/assets/chunks/virtual_mermaid-config.DDnGl6nM.js">
    <link rel="modulepreload" href="/assets/use_startup.md.Cz0IHP33.lean.js">
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/logo/logo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/assets/logo/logo.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/logo/logo.png">
    <link rel="mask-icon" href="/assets/logo/logo.png" color="#5bbad5">
    <meta name="theme-color" content="#5f67ee">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--[--><!--]--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/" data-v-1168a8e4><!--[--><!--]--><!--[--><img class="VPImage logo" src="/assets/logo/logo.png" width="24" height="24" alt data-v-8426fc1a><!--]--><span data-v-1168a8e4>MCStart</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>首页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/guide/start-install" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>快速开始</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/other/about" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>关于</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/MaiCore-Start/MaiCore-Start" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>主题</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/MaiCore-Start/MaiCore-Start" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--[--><!--[--><div class="VPFlyout VPNolebaseEnhancedReadabilitiesMenu VPNolebaseEnhancedReadabilitiesMenuFlyout" aria-label="阅读增强" role="menuitem" data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><span class="i-icon-park-outline:book-open option-icon" data-v-cf11d7a2></span><!----><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--]--></div></div></div><!--]--><!--]--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>菜单</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>回到顶部</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>快速开始</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/guide/start-install" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>目录导航</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/guide/MCStart" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>什么是 MCStart</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/guide/install" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>安装与启动</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible has-active" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>使用</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/use/use" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>新手使用指南</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/use/deployment" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>实例部署</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/use/startup" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>实例启动</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/use/FAQ" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>FAQ</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>功能详解</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/function/start" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>[A] 运行实例/实例多开</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>[B] 配置管理</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/function/config/automatic" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>[A] 自动检索</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/function/config/manual" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>[B] 手动配置</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/function/config/config_manage" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>[C] 配置管理</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/function/lpmm" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>[C] 知识库构建</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/function/mongodb_to_sqlite" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>[D] 数据库迁移</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/function/plugins" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>[E] 插件管理</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/function/instance_deployment" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>[F] 实例部署辅助系统</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/function/state" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>[G] 查看运行状态</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h3 class="text" data-v-b3fd67f8>[H] 杂项</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/function/miscellaneous/about" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>[A] 关于本程序</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/function/miscellaneous/settings" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>[B] 程序设置</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/function/miscellaneous/components" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>[C] 组件下载</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/function/miscellaneous/instance_data" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>[D] 查看实例运行数据</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 collapsible" data-v-c40bc020 data-v-b3fd67f8><div class="item" role="button" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><h2 class="text" data-v-b3fd67f8>其他</h2><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-b3fd67f8><span class="vpi-chevron-right caret-icon" data-v-b3fd67f8></span></div></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/other/about" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>联系</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>页面导航</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _use_startup" data-v-39a288b8><div><h1 id="maicore-start-启动指南" tabindex="-1">MaiCore Start 启动指南 <a class="header-anchor" href="#maicore-start-启动指南" aria-label="Permalink to &quot;MaiCore Start 启动指南&quot;">​</a></h1><div my-4 class="vp-nolebase-page-properties vp-nolebase-page-properties-container"><div class="vp-nolebase-page-properties-grid grid grid-cols-[180px_auto] gap-1 &lt;sm:grid-cols-[120px_auto]"><!--[--><!--[--><div transition="all ease-in-out" flex items-start text="zinc-400 dark:zinc-500 sm &lt;sm:xs" duration-250><div transition="all ease-in-out" min-h="8 &lt;sm:7" px="2 &lt;sm:1" py="2 &lt;sm:1" w-full flex cursor-pointer items-center bg="hover:zinc-100 dark:hover:zinc-800" rounded-md duration-250><div i-icon-park-outline:add-text mr-1></div><span overflow-hidden text-ellipsis whitespace-nowrap>字数</span></div></div><div cursor-pointer transition="all ease-in-out" min-h="8 &lt;sm:7" px="2 &lt;sm:1" py="1.5 &lt;sm:1" flex="~ row wrap" items-center gap-1 rounded-md text="sm &lt;sm:xs" bg="hover:zinc-100 dark:hover:zinc-800" duration-250><div class="vp-nolebase-page-property" data-page-property="value" data-page-property-type="dynamic" data-page-property-dynamic-type="word-count" w-full inline-flex items-center><span>5173 字</span></div></div><!--]--><!--[--><div transition="all ease-in-out" flex items-start text="zinc-400 dark:zinc-500 sm &lt;sm:xs" duration-250><div transition="all ease-in-out" min-h="8 &lt;sm:7" px="2 &lt;sm:1" py="2 &lt;sm:1" w-full flex cursor-pointer items-center bg="hover:zinc-100 dark:hover:zinc-800" rounded-md duration-250><div i-icon-park-outline:timer mr-1></div><span overflow-hidden text-ellipsis whitespace-nowrap>阅读时间</span></div></div><div cursor-pointer transition="all ease-in-out" min-h="8 &lt;sm:7" px="2 &lt;sm:1" py="1.5 &lt;sm:1" flex="~ row wrap" items-center gap-1 rounded-md text="sm &lt;sm:xs" bg="hover:zinc-100 dark:hover:zinc-800" duration-250><div class="vp-nolebase-page-property" data-page-property="value" data-page-property-type="dynamic" data-page-property-dynamic-type="reading-time" w-full inline-flex items-center><span>22 分钟</span></div></div><!--]--><!--]--></div></div><blockquote><p><strong>欢迎使用 MaiCore Start 启动系统！</strong> 这是一个全面的启动指南，将详细介绍启动流程和程序独特的三大核心机制。</p></blockquote><div class="tip custom-block"><p class="custom-block-title">温馨提示</p><p>本指南将深入阐释配置集机制、进程监控机制和实例多开机制，帮助您理解程序的强大功能。</p></div><h2 id="📋-目录" tabindex="-1">📋 目录 <a class="header-anchor" href="#📋-目录" aria-label="Permalink to &quot;📋 目录&quot;">​</a></h2><ul><li><a class="VPNolebaseInlinePreviewLink" relative href="#启动流程概述" data-v-7fde401a><!--[-->启动流程概述<!--]--><!----></a></li><li><a class="VPNolebaseInlinePreviewLink" relative href="#配置集机制详解" data-v-7fde401a><!--[-->配置集机制详解<!--]--><!----></a></li><li><a class="VPNolebaseInlinePreviewLink" relative href="#进程监控机制详解" data-v-7fde401a><!--[-->进程监控机制详解<!--]--><!----></a></li><li><a class="VPNolebaseInlinePreviewLink" relative href="#实例多开机制详解" data-v-7fde401a><!--[-->实例多开机制详解<!--]--><!----></a></li><li><a class="VPNolebaseInlinePreviewLink" relative href="#启动操作指南" data-v-7fde401a><!--[-->启动操作指南<!--]--><!----></a></li><li><a class="VPNolebaseInlinePreviewLink" relative href="#高级功能使用" data-v-7fde401a><!--[-->高级功能使用<!--]--><!----></a></li><li><a class="VPNolebaseInlinePreviewLink" relative href="#故障排除" data-v-7fde401a><!--[-->故障排除<!--]--><!----></a></li></ul><h2 id="🚀-启动流程概述" tabindex="-1">🚀 启动流程概述 <a class="header-anchor" href="#🚀-启动流程概述" aria-label="Permalink to &quot;🚀 启动流程概述&quot;">​</a></h2><h3 id="启动架构图" tabindex="-1">启动架构图 <a class="header-anchor" href="#启动架构图" aria-label="Permalink to &quot;启动架构图&quot;">​</a></h3><div class="mermaid my-class"></div><h3 id="启动流程详解" tabindex="-1">启动流程详解 <a class="header-anchor" href="#启动流程详解" aria-label="Permalink to &quot;启动流程详解&quot;">​</a></h3><h4 id="_1-程序初始化-🔧" tabindex="-1">1. 程序初始化 🔧 <a class="header-anchor" href="#_1-程序初始化-🔧" aria-label="Permalink to &quot;1. 程序初始化 🔧&quot;">​</a></h4><p>当您启动 MaiCore Start 时，系统会按以下顺序初始化：</p><ol><li><p><strong>配置系统初始化</strong></p><ul><li>加载 <code>config/config.toml</code> 配置文件</li><li>验证配置结构完整性</li><li>修复损坏的配置数据</li></ul></li><li><p><strong>端口管理器初始化</strong></p><ul><li>扫描系统已使用端口</li><li>加载端口使用历史</li><li>准备端口分配策略</li></ul></li><li><p><strong>UI界面初始化</strong></p><ul><li>加载主题配置</li><li>初始化控制台界面</li><li>设置颜色方案</li></ul></li></ol><h4 id="_2-主菜单显示-📱" tabindex="-1">2. 主菜单显示 📱 <a class="header-anchor" href="#_2-主菜单显示-📱" aria-label="Permalink to &quot;2. 主菜单显示 📱&quot;">​</a></h4><p>程序显示功能丰富的主菜单：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>🚀 MaiCore Start 主菜单</span></span>
<span class="line"><span>==================================================</span></span>
<span class="line"><span>[1] 部署新实例</span></span>
<span class="line"><span>[2] 启动现有实例  </span></span>
<span class="line"><span>[3] 实例多开管理</span></span>
<span class="line"><span>[4] 配置管理</span></span>
<span class="line"><span>[5] 组件下载</span></span>
<span class="line"><span>[6] 知识库</span></span>
<span class="line"><span>[7] 实例统计</span></span>
<span class="line"><span>[8] 系统设置</span></span>
<span class="line"><span>[Q] 退出程序</span></span></code></pre></div><h2 id="⚙️-配置集机制详解" tabindex="-1">⚙️ 配置集机制详解 <a class="header-anchor" href="#⚙️-配置集机制详解" aria-label="Permalink to &quot;⚙️ 配置集机制详解&quot;">​</a></h2><h3 id="什么是配置集" tabindex="-1">什么是配置集？ <a class="header-anchor" href="#什么是配置集" aria-label="Permalink to &quot;什么是配置集？&quot;">​</a></h3><p>配置集是 MaiCore Start 的<mark>核心创新机制</mark>，它将每个 Bot 实例的所有配置信息封装为一个独立的配置单元。</p><div class="info custom-block"><p class="custom-block-title">配置集特点</p><ul><li><strong>独立性</strong>: 每个配置集包含完整的实例信息</li><li><strong>可切换</strong>: 支持在多个配置集间快速切换</li><li><strong>可管理</strong>: 支持创建、编辑、删除、验证配置集</li><li><strong>可恢复</strong>: 清晰的引导您重新配置</li></ul></div><h3 id="配置集结构" tabindex="-1">配置集结构 <a class="header-anchor" href="#配置集结构" aria-label="Permalink to &quot;配置集结构&quot;">​</a></h3><div class="language-toml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">toml</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># config/config.toml</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">configurations</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">serial_number = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;1&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          #序列号</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">absolute_serial_number = </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">   #绝对序列号</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">version_path = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;0.0.0&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">       #版本号</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">nickname_path = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;默认配置&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    #实例昵称</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">bot_type = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MaiBot&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          #实例类型</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mai_path = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                #MaiBot的主程序地址</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mofox_path = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              #MoFox_bot的主程序地址</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">adapter_path = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">            #适配器地址</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">napcat_path = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">             #NapCat地址</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">napcat_version = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">          #NapCat版本</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">qq_account = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">              #当前实例的QQ号</span></span></code></pre></div><h3 id="配置集管理功能" tabindex="-1">配置集管理功能 <a class="header-anchor" href="#配置集管理功能" aria-label="Permalink to &quot;配置集管理功能&quot;">​</a></h3><h4 id="_1-自动配置检测-🔍" tabindex="-1">1. 自动配置检测 🔍 <a class="header-anchor" href="#_1-自动配置检测-🔍" aria-label="Permalink to &quot;1. 自动配置检测 🔍&quot;">​</a></h4><p>程序具备强大的<mark>自动检测能力</mark>：</p><ul><li><strong>Bot路径检测</strong>: 自动扫描指定目录下的 Bot 实例</li><li><strong>配置文件解析</strong>: 读取 <code>bot_config.toml</code> 预填充信息</li><li><strong>组件路径检测</strong>: 自动发现适配器、NapCat、WebUI 等组件</li><li><strong>版本识别</strong>: 自动识别 Bot 版本并推荐相应配置</li></ul><h4 id="_2-配置验证与修复-🛠️" tabindex="-1">2. 配置验证与修复 🛠️ <a class="header-anchor" href="#_2-配置验证与修复-🛠️" aria-label="Permalink to &quot;2. 配置验证与修复 🛠️&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _validate_and_repair_serials</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;验证并修复绝对序列号，确保其唯一且升序&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    repaired </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    configurations </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.get_all_configurations()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 检查是否存在问题（重复或不连续）</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    serials </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cfg.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;absolute_serial_number&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _, cfg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config_items]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    is_problematic </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(serials) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(serials)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">or</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sorted</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(serials) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">range</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">len</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(serials) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> is_problematic:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 按原始顺序重新分配序列号</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i, (name, config) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> enumerate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(config_items):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.config[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;configurations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">][name][</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;absolute_serial_number&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span></code></pre></div><h4 id="_3-配置集操作-🎯" tabindex="-1">3. 配置集操作 🎯 <a class="header-anchor" href="#_3-配置集操作-🎯" aria-label="Permalink to &quot;3. 配置集操作 🎯&quot;">​</a></h4><p><strong>创建配置集</strong>:</p><ul><li>自动创建: 扫描现有 Bot 实例并创建配置</li><li>手动创建: 逐步输入配置信息</li><li>模板创建: 基于现有配置创建副本</li></ul><p><strong>编辑配置集</strong>:</p><ul><li>路径更新: 修改 Bot、适配器等组件路径</li><li>选项调整: 更改安装的组件选项</li><li>参数修改: 更新版本、昵称、QQ号等</li></ul><h2 id="📊-进程监控机制详解" tabindex="-1">📊 进程监控机制详解 <a class="header-anchor" href="#📊-进程监控机制详解" aria-label="Permalink to &quot;📊 进程监控机制详解&quot;">​</a></h2><h3 id="进程管理架构" tabindex="-1">进程管理架构 <a class="header-anchor" href="#进程管理架构" aria-label="Permalink to &quot;进程管理架构&quot;">​</a></h3><p>MaiCore Start 实现了<mark>极其强大的进程监控机制</mark>，确保每个组件都能被妥善管理。</p><div class="warning custom-block"><p class="custom-block-title">进程监控特点</p><ul><li><strong>隔离性</strong>: 每个组件在独立进程中运行</li><li><strong>可控性</strong>: 支持启动、停止、重启单个进程</li><li><strong>监控性</strong>: 实时监控进程状态和资源使用</li><li><strong>安全性</strong>: 强制终止进程树，避免僵尸进程</li></ul></div><h3 id="进程管理器核心组件" tabindex="-1">进程管理器核心组件 <a class="header-anchor" href="#进程管理器核心组件" aria-label="Permalink to &quot;进程管理器核心组件&quot;">​</a></h3><h4 id="_1-processmanager-类-🎛️" tabindex="-1">1. _ProcessManager 类 🎛️ <a class="header-anchor" href="#_1-processmanager-类-🎛️" aria-label="Permalink to &quot;1. _ProcessManager 类 🎛️&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _ProcessManager</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;内部进程管理器。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    负责在新CMD窗口中启动、跟踪和停止进程。</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.running_processes: List[Dict[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Any]] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span></code></pre></div><p><strong>核心功能</strong>:</p><ul><li><strong>进程启动</strong>: 在新控制台窗口中启动组件</li><li><strong>进程跟踪</strong>: 维护运行进程的信息列表</li><li><strong>进程停止</strong>: 安全终止进程及其子进程</li><li><strong>资源监控</strong>: 监控 CPU、内存使用情况</li></ul><h4 id="_2-组件启动机制-🔧" tabindex="-1">2. 组件启动机制 🔧 <a class="header-anchor" href="#_2-组件启动机制-🔧" aria-label="Permalink to &quot;2. 组件启动机制 🔧&quot;">​</a></h4><p>每个组件都继承自 <code>_LaunchComponent</code> 基类：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _LaunchComponent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;可启动组件的基类。&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> __init__</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, config: Dict[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Any]):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> name</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.is_enabled </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> check_enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;检查该组件是否根据配置启用。&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        raise</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> NotImplementedError</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_launch_details</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self) -&gt; Optional[Tuple[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]]:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;&quot;&quot;获取启动所需的命令、工作目录和窗口标题。&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        raise</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> NotImplementedError</span></span></code></pre></div><p><strong>支持的组件类型</strong>:</p><ul><li><strong>MongoDB组件</strong>: 管理数据库服务</li><li><strong>NapCat组件</strong>: 管理 QQ 协议端</li><li><strong>适配器组件</strong>: 管理 Bot 适配器</li><li><strong>WebUI组件</strong>: 管理网页控制面板</li><li><strong>Mai组件</strong>: 管理 Bot 主程序</li></ul><h4 id="_3-智能启动策略-🧠" tabindex="-1">3. 智能启动策略 🧠 <a class="header-anchor" href="#_3-智能启动策略-🧠" aria-label="Permalink to &quot;3. 智能启动策略 🧠&quot;">​</a></h4><p>程序采用<mark>智能启动策略</mark>，确保组件按正确顺序启动：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> launch</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, components_to_start: List[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;根据给定的组件列表启动。&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 确保MongoDB总是最先启动，虽然它总是用不上</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._components[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mongodb&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].is_enabled:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._components[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;mongodb&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].start(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._process_manager):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ui.print_warning(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MongoDB启动失败，但将继续尝试启动其他组件。&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 按顺序启动组件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    launch_order </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;napcat&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;webui&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;adapter&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mai&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    final_success </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> comp_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> launch_order:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> comp_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> components_to_start:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._components[comp_name].start(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._process_manager):</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">                # 麦麦本体是核心，如果它失败了，整个启动就算失败</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> comp_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;mai&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                    final_success </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">                    break</span></span></code></pre></div><h4 id="_4-进程监控界面-📈" tabindex="-1">4. 进程监控界面 📈 <a class="header-anchor" href="#_4-进程监控界面-📈" aria-label="Permalink to &quot;4. 进程监控界面 📈&quot;">​</a></h4><p>程序提供直观的进程监控界面：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>📊 进程状态管理</span></span>
<span class="line"><span>┌──────┬────────────────────┬────────┬──────────────┬──────────────┐</span></span>
<span class="line"><span>│ PID  │ 进程名称            │ CPU %  │ 内存 (MB)    │ 运行时间 (s) │</span></span>
<span class="line"><span>├──────┼────────────────────┼────────┼──────────────┼──────────────┤</span></span>
<span class="line"><span>│ 1234 │ 麦麦启动器          │ 2.15   │ 45.32        │ 3600         │</span></span>
<span class="line"><span>│ 5678 │ MaiBot主程序        │ 15.67  │ 128.45       │ 3595         │</span></span>
<span class="line"><span>│ 9012 │ NapCatQQ            │ 8.23   │ 89.12        │ 3590         │</span></span>
<span class="line"><span>│ 3456 │ 适配器              │ 3.45   │ 56.78        │ 3585         │</span></span>
<span class="line"><span>└──────┴────────────────────┴────────┴──────────────┴──────────────┘</span></span></code></pre></div><h3 id="进程安全机制" tabindex="-1">进程安全机制 <a class="header-anchor" href="#进程安全机制" aria-label="Permalink to &quot;进程安全机制&quot;">​</a></h3><h4 id="_1-强制进程终止-⚡" tabindex="-1">1. 强制进程终止 ⚡ <a class="header-anchor" href="#_1-强制进程终止-⚡" aria-label="Permalink to &quot;1. 强制进程终止 ⚡&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> stop_process</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, pid: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;通过PID停止单个进程及其子进程。&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 优先使用 taskkill (仅限Windows) 来确保终止整个进程树</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;nt&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        kill_command </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;taskkill&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/F&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/T&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;/PID&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(pid)]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        result </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> subprocess.run(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            kill_command,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            capture_output</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            text</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            check</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">False</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">            creationflags</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">subprocess.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">CREATE_NO_WINDOW</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        )</span></span></code></pre></div><h4 id="_2-进程状态缓存-🔄" tabindex="-1">2. 进程状态缓存 🔄 <a class="header-anchor" href="#_2-进程状态缓存-🔄" aria-label="Permalink to &quot;2. 进程状态缓存 🔄&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> show_running_processes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self):</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;以表格形式显示当前正在运行的进程状态，并使用缓存计算CPU。&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 清理已结束进程的缓存</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._process_cache.keys()):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> pid </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">not</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> current_pids:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            del</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._process_cache[pid]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 使用缓存避免重复创建 Process 对象</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> meta </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> all_process_meta:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._process_cache.get(pid)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">is</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            p </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> psutil.Process(pid)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            p.cpu_percent()  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 第一次调用返回0，但会初始化计时器</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._process_cache[pid] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p</span></span></code></pre></div><hr><h2 id="🔀-实例多开机制详解" tabindex="-1">🔀 实例多开机制详解 <a class="header-anchor" href="#🔀-实例多开机制详解" aria-label="Permalink to &quot;🔀 实例多开机制详解&quot;">​</a></h2><h3 id="多开机制概述" tabindex="-1">多开机制概述 <a class="header-anchor" href="#多开机制概述" aria-label="Permalink to &quot;多开机制概述&quot;">​</a></h3><p>实例多开是 MaiCore Start 的<mark>革命性功能</mark>，允许用户同时运行多个 Bot 实例，每个实例都有独立的配置和端口。</p><div class="tip custom-block"><p class="custom-block-title">多开优势</p><ul><li><strong>资源隔离</strong>: 每个实例独立运行，互不干扰</li><li><strong>端口自动分配</strong>: 智能避免端口冲突</li><li><strong>统一管理</strong>: 通过统一界面管理所有实例</li><li><strong>灵活配置</strong>: 每个实例可使用不同配置</li></ul></div><h3 id="多开架构设计" tabindex="-1">多开架构设计 <a class="header-anchor" href="#多开架构设计" aria-label="Permalink to &quot;多开架构设计&quot;">​</a></h3><h4 id="_1-实例标识系统-🏷️" tabindex="-1">1. 实例标识系统 🏷️ <a class="header-anchor" href="#_1-实例标识系统-🏷️" aria-label="Permalink to &quot;1. 实例标识系统 🏷️&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> create_multi_instance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, base_config: Dict[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Any], instance_name: Optional[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> None</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;创建多开实例&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 生成实例ID</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    instance_id </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(uuid.uuid4())[:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">8</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance_name:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        instance_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;多开实例_</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">instance_id</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 创建多开实例配置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    multi_instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;id&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: instance_id,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: instance_name,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;bot_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: bot_type,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;base_config_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._get_config_name_from_config(base_config),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;created_time&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Path().cwd()),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;status&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;created&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># created, running, stopped</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;ports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;main_port&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: main_port,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            &quot;secondary_port&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: secondary_port</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span></code></pre></div><p><strong>实例属性</strong>:</p><ul><li><strong>ID</strong>: 8位唯一标识符</li><li><strong>名称</strong>: 用户友好的实例名称</li><li><strong>类型</strong>: MaiBot 或 MoFox_bot</li><li><strong>状态</strong>: created/running/stopped</li><li><strong>端口</strong>: 主程序端口和辅助端口</li></ul><h4 id="_2-端口智能分配-🎯" tabindex="-1">2. 端口智能分配 🎯 <a class="header-anchor" href="#_2-端口智能分配-🎯" aria-label="Permalink to &quot;2. 端口智能分配 🎯&quot;">​</a></h4><p>端口管理器采用<mark>智能分配算法</mark>：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> get_next_instance_port</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, instance_type: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, base_config: Dict) -&gt; Tuple[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;为新实例获取下一个可用端口组合，支持多实例混用&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;MaiBot&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # MaiBot需要主程序端口和WebUI端口</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            main_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.find_available_port(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mai_main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        except</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            main_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.find_available_port(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mofox_main&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 扩展搜索</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        try</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            webui_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.find_available_port(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mai_webui&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, main_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        except</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            webui_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.find_available_port(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;webui&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, main_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> main_port, webui_port</span></span></code></pre></div><p><strong>端口分配策略</strong>:</p><ul><li><strong>MaiBot</strong>: 主程序(8000-8100) + WebUI(8001-8101)</li><li><strong>MoFox_bot</strong>: 主程序(8000-8100) + NapCat(8090-8190)</li><li><strong>冲突检测</strong>: 自动检测并避免端口冲突</li><li><strong>范围扩展</strong>: 主范围冲突时自动扩展到备用范围</li></ul><h4 id="_3-配置继承机制-🔗" tabindex="-1">3. 配置继承机制 🔗 <a class="header-anchor" href="#_3-配置继承机制-🔗" aria-label="Permalink to &quot;3. 配置继承机制 🔗&quot;">​</a></h4><p>多开实例基于基础配置创建，但会进行个性化调整：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _get_base_config_for_instance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, instance: Dict[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Any]) -&gt; Dict[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Any]:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;为多开实例获取基础配置&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 获取基础配置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    config_name </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;base_config_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    base_config </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> all_configs.get(config_name, {})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 更新端口信息</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ports </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ports&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    main_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ports.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main_port&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    secondary_port </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ports.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;secondary_port&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> main_port:</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 更新.env文件</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        env_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.join(instance_path, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;.env&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bot_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;MaiBot&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            port_manager.update_env_file(env_path, main_port, secondary_port)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            port_manager.update_env_file(env_path, main_port)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        # 更新适配器配置</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        adapter_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> base_config.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;adapter_path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> adapter_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">and</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.exists(adapter_path):</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">            if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bot_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;MaiBot&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                adapter_config_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.join(adapter_path, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;config.toml&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                port_manager.update_maibot_adapter_config(adapter_config_path, main_port, secondary_port)</span></span></code></pre></div><h3 id="多开管理界面" tabindex="-1">多开管理界面 <a class="header-anchor" href="#多开管理界面" aria-label="Permalink to &quot;多开管理界面&quot;">​</a></h3><h4 id="_1-实例列表显示-📋" tabindex="-1">1. 实例列表显示 📋 <a class="header-anchor" href="#_1-实例列表显示-📋" aria-label="Permalink to &quot;1. 实例列表显示 📋&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>🚀 实例多开管理</span></span>
<span class="line"><span>==================================================</span></span>
<span class="line"><span>[端口使用状态]</span></span>
<span class="line"><span>  MaiBot实例:</span></span>
<span class="line"><span>    - 我的麦麦1: 主程序(8000) + WebUI(8001)</span></span>
<span class="line"><span>    - 我的麦麦2: 主程序(8002) + WebUI(8003)</span></span>
<span class="line"><span>  MoFox_bot实例:</span></span>
<span class="line"><span>    - 墨狐测试: 主程序(8004) + NapCat(8090)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>┌────────┬──────────────┬──────────┬──────────┬──────────┐</span></span>
<span class="line"><span>│ ID     │ 名称         │ 类型     │ 状态     │ 端口     │</span></span>
<span class="line"><span>├────────┼──────────────┼──────────┼──────────┼──────────┤</span></span>
<span class="line"><span>│ a1b2c3d4│ 我的麦麦1    │ MaiBot   │ running  │ 8000/8001│</span></span>
<span class="line"><span>│ e5f6g7h8│ 我的麦麦2    │ MaiBot   │ stopped  │ 8002/8003│</span></span>
<span class="line"><span>│ i9j0k1l2│ 墨狐测试     │ MoFox_bot│ running  │ 8004/8090│</span></span>
<span class="line"><span>└────────┴──────────────┴──────────┴──────────┴──────────┘</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[操作选项]</span></span>
<span class="line"><span> [A] 创建新的多开实例</span></span>
<span class="line"><span> [B] 启动多开实例</span></span>
<span class="line"><span> [C] 停止多开实例</span></span>
<span class="line"><span> [D] 删除多开实例</span></span>
<span class="line"><span> [E] 查看实例详情</span></span>
<span class="line"><span> [Q] 返回上级菜单</span></span></code></pre></div><h4 id="_2-实例操作功能-⚡" tabindex="-1">2. 实例操作功能 ⚡ <a class="header-anchor" href="#_2-实例操作功能-⚡" aria-label="Permalink to &quot;2. 实例操作功能 ⚡&quot;">​</a></h4><p><strong>创建实例</strong>:</p><ol><li>选择基础配置</li><li>输入实例名称</li><li>自动分配端口</li><li>创建实例配置</li></ol><p><strong>启动实例</strong>:</p><ol><li>验证实例配置</li><li>分配可用端口</li><li>更新配置文件</li><li>启动组件服务</li></ol><p><strong>停止实例</strong>:</p><ol><li>停止所有相关进程</li><li>释放端口占用</li><li>更新实例状态</li></ol><p><strong>删除实例</strong>:</p><ol><li>确认实例状态</li><li>停止运行中的实例</li><li>删除实例配置</li><li>清理端口信息</li></ol><hr><h2 id="🎮-启动操作指南" tabindex="-1">🎮 启动操作指南 <a class="header-anchor" href="#🎮-启动操作指南" aria-label="Permalink to &quot;🎮 启动操作指南&quot;">​</a></h2><h3 id="快速启动流程" tabindex="-1">快速启动流程 <a class="header-anchor" href="#快速启动流程" aria-label="Permalink to &quot;快速启动流程&quot;">​</a></h3><h4 id="_1-选择启动方式-🚀" tabindex="-1">1. 选择启动方式 🚀 <a class="header-anchor" href="#_1-选择启动方式-🚀" aria-label="Permalink to &quot;1. 选择启动方式 🚀&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>🚀 启动选择菜单</span></span>
<span class="line"><span>==================================================</span></span>
<span class="line"><span>实例版本: 0.10.5</span></span>
<span class="line"><span>实例昵称: 我的麦麦</span></span>
<span class="line"><span>Bot 类型: MaiBot</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[可用组件]</span></span>
<span class="line"><span>  • 适配器: ✅ 可用</span></span>
<span class="line"><span>  • NapCatQQ: ✅ 可用</span></span>
<span class="line"><span>  • 检查MongoDB: ❌ 未配置</span></span>
<span class="line"><span>  • 控制面板: ✅ 可用</span></span>
<span class="line"><span>  • 麦麦本体: ✅ 可用</span></span>
<span class="line"><span></span></span>
<span class="line"><span>[预设启动项]</span></span>
<span class="line"><span> [1] 主程序+适配器</span></span>
<span class="line"><span> [2] 主程序+适配器+NapCatQQ</span></span>
<span class="line"><span> [3] 主程序+适配器+检查MongoDB</span></span>
<span class="line"><span> [4] 主程序+适配器+NapCatQQ+检查MongoDB</span></span>
<span class="line"><span> [5] 主程序+适配器+控制面板</span></span>
<span class="line"><span> [6] 主程序+适配器+NapCat+控制面板</span></span>
<span class="line"><span></span></span>
<span class="line"><span> [H] 高级启动项</span></span>
<span class="line"><span> [Q] 返回</span></span></code></pre></div><h4 id="_2-高级启动选项-🛠️" tabindex="-1">2. 高级启动选项 🛠️ <a class="header-anchor" href="#_2-高级启动选项-🛠️" aria-label="Permalink to &quot;2. 高级启动选项 🛠️&quot;">​</a></h4><p>高级启动支持<mark>多选组件</mark>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>🛠️ 高级启动项</span></span>
<span class="line"><span>==================================================</span></span>
<span class="line"><span>可多选，请使用英文逗号&#39;,&#39;分隔选项（例如: 1,3）</span></span>
<span class="line"><span></span></span>
<span class="line"><span> [1] 主程序 - ✅ 可用</span></span>
<span class="line"><span> [2] 适配器 - ✅ 可用</span></span>
<span class="line"><span> [3] NapCatQQ - ✅ 可用</span></span>
<span class="line"><span> [4] 检查MongoDB - ❌ 未配置</span></span>
<span class="line"><span> [5] 控制面板 - ✅ 可用</span></span>
<span class="line"><span></span></span>
<span class="line"><span> [Q] 返回</span></span>
<span class="line"><span></span></span>
<span class="line"><span>请选择要启动的组件: 1,2,5</span></span></code></pre></div><h3 id="启动流程详解-1" tabindex="-1">启动流程详解 <a class="header-anchor" href="#启动流程详解-1" aria-label="Permalink to &quot;启动流程详解&quot;">​</a></h3><h4 id="_1-配置验证-✅" tabindex="-1">1. 配置验证 ✅ <a class="header-anchor" href="#_1-配置验证-✅" aria-label="Permalink to &quot;1. 配置验证 ✅&quot;">​</a></h4><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> validate_configuration</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, config: Dict[</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, Any]) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">list</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;验证配置的有效性。&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    errors </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> []</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 验证Bot路径</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    bot_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bot_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;MaiBot&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> bot_type </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;MoFox_bot&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        mai_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mofox_path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    else</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        mai_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;mai_path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    valid, msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> validate_path(mai_path, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">check_file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bot.py&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> valid:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        errors.append(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;麦麦本体路径: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 验证适配器路径</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._components[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;adapter&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].is_enabled:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        adapter_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;adapter_path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        valid, msg </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> validate_path(adapter_path, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">check_file</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;main.py&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> valid:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            errors.append(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">f</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;适配器路径: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">{</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">msg</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">}</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 验证NapCat路径</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">._components[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;napcat&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].is_enabled:</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        napcat_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> config.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;napcat_path&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (napcat_path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">and</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> os.path.exists(napcat_path) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">and</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> napcat_path.lower().endswith(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.exe&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)):</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            errors.append(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;NapCat路径: 无效或文件不存在。&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> errors</span></span></code></pre></div><h4 id="_2-组件启动顺序-📋" tabindex="-1">2. 组件启动顺序 📋 <a class="header-anchor" href="#_2-组件启动顺序-📋" aria-label="Permalink to &quot;2. 组件启动顺序 📋&quot;">​</a></h4><p><strong>标准启动顺序</strong>:</p><ol><li><strong>MongoDB</strong> (如果启用) - 数据库服务</li><li><strong>NapCat</strong> - QQ 协议端</li><li><strong>WebUI</strong> - 网页控制面板</li><li><strong>适配器</strong> - Bot 适配器</li><li><strong>MaiBot/MoFox_bot</strong> - Bot 主程序</li></ol><p><strong>启动逻辑</strong>:</p><ul><li>MongoDB 优先启动，确保数据库可用</li><li>NapCat 在适配器前启动，确保 QQ 连接就绪</li><li>WebUI 独立启动，不依赖其他组件</li><li>适配器连接 Bot 和 NapCat</li><li>Bot 主程序最后启动，协调所有组件</li></ul><h4 id="_3-启动成功确认-✅" tabindex="-1">3. 启动成功确认 ✅ <a class="header-anchor" href="#_3-启动成功确认-✅" aria-label="Permalink to &quot;3. 启动成功确认 ✅&quot;">​</a></h4><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>🎉 启动流程完成！</span></span>
<span class="line"><span>==================================================</span></span>
<span class="line"><span>✅ MongoDB服务已启动</span></span>
<span class="line"><span>✅ NapCatQQ已启动 (PID: 1234)</span></span>
<span class="line"><span>✅ 控制面板已启动 (http://localhost:7999)</span></span>
<span class="line"><span>✅ 适配器已启动 (PID: 5678)</span></span>
<span class="line"><span>✅ 麦麦本体已启动 (PID: 9012)</span></span>
<span class="line"><span></span></span>
<span class="line"><span>🌐 访问地址:</span></span>
<span class="line"><span>   • Bot主程序: http://localhost:8000</span></span>
<span class="line"><span>   • 控制面板: http://localhost:7999</span></span>
<span class="line"><span></span></span>
<span class="line"><span>📱 进程监控:</span></span>
<span class="line"><span>   使用 [进程管理] 功能查看实时状态</span></span></code></pre></div><h2 id="🔧-高级功能使用" tabindex="-1">🔧 高级功能使用 <a class="header-anchor" href="#🔧-高级功能使用" aria-label="Permalink to &quot;🔧 高级功能使用&quot;">​</a></h2><h3 id="进程管理功能" tabindex="-1">进程管理功能 <a class="header-anchor" href="#进程管理功能" aria-label="Permalink to &quot;进程管理功能&quot;">​</a></h3><h4 id="_1-进程状态监控-📊" tabindex="-1">1. 进程状态监控 📊 <a class="header-anchor" href="#_1-进程状态监控-📊" aria-label="Permalink to &quot;1. 进程状态监控 📊&quot;">​</a></h4><p>程序提供<mark>实时进程监控</mark>：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>╭────────────────────────────────────────────────────── 可用命令 ──────────────────────────────────────────────────────╮</span></span>
<span class="line"><span>│ stop &lt;PID&gt;       终止指定PID的进程                                                                                   │</span></span>
<span class="line"><span>│ restart &lt;PID&gt;    重启指定PID的进程                                                                                   │</span></span>
<span class="line"><span>│ details &lt;PID&gt;    查看指定PID的进程详情                                                                               │</span></span>
<span class="line"><span>│ stopall          终止所有受管进程                                                                                    │</span></span>
<span class="line"><span>│ q / quit         退出状态监控                                                                                        │</span></span>
<span class="line"><span>│ Tab键            补全指令或PID                                                                                       │</span></span>
<span class="line"><span>│                                                                                                                      │</span></span>
<span class="line"><span>│                                                                                                                      │</span></span>
<span class="line"><span>│                                                                                                                      │</span></span>
<span class="line"><span>╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span></span>
<span class="line"><span>                            [📊 进程状态管理]</span></span>
<span class="line"><span>┏━━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━┳━━━━━━━━━━━┳━━━━━━━━━━━━━━┓</span></span>
<span class="line"><span>┃ PID      ┃ 进程名称                ┃ CPU % ┃ 内存 (MB) ┃ 运行时间 (s) ┃</span></span>
<span class="line"><span>┡━━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━╇━━━━━━━━━━━╇━━━━━━━━━━━━━━┩</span></span>
<span class="line"><span>│ 23936    │ 麦麦启动器 (主程序)     │  7.70 │     60.71 │          218 │</span></span>
<span class="line"><span>│ 22420    │ MaiBot 控制面板 - main  │  0.00 │      7.45 │           60 │</span></span>
<span class="line"><span>│ 25872    │ maimai - 适配器 vmain   │  0.00 │      5.58 │           60 │</span></span>
<span class="line"><span>│ 12332    │ maimai - 麦麦本体 vmain │  0.00 │      5.59 │           58 │</span></span>
<span class="line"><span>└──────────┴─────────────────────────┴───────┴───────────┴──────────────┘</span></span>
<span class="line"><span></span></span>
<span class="line"><span></span></span>
<span class="line"><span>╭────────────────────────────────────────────────────── 输入命令 ──────────────────────────────────────────────────────╮</span></span>
<span class="line"><span>│ &gt; _                                                                                                                  │</span></span>
<span class="line"><span>╰──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────╯</span></span></code></pre></div><h4 id="_2-进程操作-⚡" tabindex="-1">2. 进程操作 ⚡ <a class="header-anchor" href="#_2-进程操作-⚡" aria-label="Permalink to &quot;2. 进程操作 ⚡&quot;">​</a></h4><p><strong>重启进程<code>restart &lt;PID&gt;</code></strong>:</p><ul><li>停止现有进程</li><li>等待端口释放</li><li>重新启动进程</li><li>确认启动状态</li></ul><p><strong>停止进程<code>stop &lt;PID&gt;</code> or <code>stopall</code></strong>:</p><ul><li>发送终止信号</li><li>强制结束进程树</li><li>清理进程缓存</li><li>更新状态显示</li></ul><p><strong>查看详情<code>details &lt;PID&gt;</code></strong>:</p><ul><li>进程基本信息</li><li>内存使用情况</li><li>启动时间</li><li>命令行参数</li><li>工作目录</li></ul><h3 id="配置管理功能" tabindex="-1">配置管理功能 <a class="header-anchor" href="#配置管理功能" aria-label="Permalink to &quot;配置管理功能&quot;">​</a></h3><h4 id="_1-配置集操作-🎯" tabindex="-1">1. 配置集操作 🎯 <a class="header-anchor" href="#_1-配置集操作-🎯" aria-label="Permalink to &quot;1. 配置集操作 🎯&quot;">​</a></h4><p><strong>创建配置集</strong>:</p><ul><li>自动检测现有 Bot</li><li>手动输入配置信息</li><li>验证配置有效性</li><li>保存配置集</li></ul><p><strong>编辑配置集</strong>:</p><ul><li>修改路径信息</li><li>调整组件选项</li><li>更新基本参数</li><li>重新验证配置</li></ul><p><strong>配置集切换</strong>:</p><ul><li>序列号选择</li><li>列表选择</li><li>默认设置</li></ul><h4 id="_2-配置验证与修复-🔧" tabindex="-1">2. 配置验证与修复 🔧 <a class="header-anchor" href="#_2-配置验证与修复-🔧" aria-label="Permalink to &quot;2. 配置验证与修复 🔧&quot;">​</a></h4><p>程序会自动检测和修复配置问题：</p><ul><li><strong>路径验证</strong>: 检查所有路径是否有效</li><li><strong>文件检查</strong>: 确认必需文件存在</li><li><strong>版本兼容</strong>: 验证版本与组件兼容性</li><li><strong>序列号修复</strong>: 自动修复重复或错误的序列号</li></ul><h3 id="多开实例高级功能" tabindex="-1">多开实例高级功能 <a class="header-anchor" href="#多开实例高级功能" aria-label="Permalink to &quot;多开实例高级功能&quot;">​</a></h3><h4 id="_1-批量操作-📦" tabindex="-1">1. 批量操作 📦 <a class="header-anchor" href="#_1-批量操作-📦" aria-label="Permalink to &quot;1. 批量操作 📦&quot;">​</a></h4><p><strong>批量启动</strong>:</p><ul><li>选择多个实例</li><li>依次启动每个实例</li><li>显示启动结果</li><li>监控运行状态</li></ul><p><strong>批量停止</strong>:</p><ul><li>停止所有运行实例</li><li>释放所有占用端口</li><li>更新实例状态</li></ul><p><strong>批量删除</strong>:</p><ul><li>确认删除操作</li><li>停止运行中的实例</li><li>删除实例配置</li><li>清理相关文件</li></ul><h4 id="_2-实例模板-📋" tabindex="-1">2. 实例模板 📋 <a class="header-anchor" href="#_2-实例模板-📋" aria-label="Permalink to &quot;2. 实例模板 📋&quot;">​</a></h4><p>创建实例模板以快速部署：</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 基于现有实例创建模板</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> create_instance_template</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self, instance_id: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, template_name: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">str</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;创建实例模板&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    instance </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.get_multi_instance(instance_id)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> not</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> instance:</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    template </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: template_name,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;bot_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: instance[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;bot_type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;base_config_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: instance[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;base_config_name&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;install_options&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: instance.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;install_options&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {}),</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        &quot;is_template&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">True</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 保存模板</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    templates </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.config.get(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;instance_templates&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, {})</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    templates[template_name] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> template</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.config.set(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;instance_templates&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, templates)</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.config.save()</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> True</span></span></code></pre></div><h2 id="❓-故障排除" tabindex="-1">❓ 故障排除 <a class="header-anchor" href="#❓-故障排除" aria-label="Permalink to &quot;❓ 故障排除&quot;">​</a></h2><h3 id="常见启动问题" tabindex="-1">常见启动问题 <a class="header-anchor" href="#常见启动问题" aria-label="Permalink to &quot;常见启动问题&quot;">​</a></h3><h4 id="_1-配置验证失败-❌" tabindex="-1">1. 配置验证失败 ❌ <a class="header-anchor" href="#_1-配置验证失败-❌" aria-label="Permalink to &quot;1. 配置验证失败 ❌&quot;">​</a></h4><p><strong>问题</strong>: 配置验证显示错误</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>❌ 配置验证失败：</span></span>
<span class="line"><span>  • 麦麦本体路径: 路径不存在或缺少bot.py文件</span></span>
<span class="line"><span>  • 适配器路径: 路径不存在或缺少main.py文件</span></span>
<span class="line"><span>  • NapCat路径: 无效或文件不存在</span></span></code></pre></div><p><strong>解决方案</strong>:</p><ol><li><strong>检查路径</strong>: 确认所有路径正确且文件存在</li><li><strong>重新配置</strong>: 使用配置管理功能更新路径</li><li><strong>重新部署</strong>: 如果路径确实改变，重新部署实例</li></ol><h4 id="_2-端口冲突-🚫" tabindex="-1">2. 端口冲突 🚫 <a class="header-anchor" href="#_2-端口冲突-🚫" aria-label="Permalink to &quot;2. 端口冲突 🚫&quot;">​</a></h4><p><strong>问题</strong>: 端口被占用</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>❌ 端口 8000 已被占用</span></span></code></pre></div><p><strong>解决方案</strong>:</p><ol><li><strong>检查占用进程</strong>: 使用 <code>netstat -ano | findstr :8000</code></li><li><strong>停止冲突进程</strong>: 结束占用端口的进程</li><li><strong>使用多开功能</strong>: 创建新实例自动分配其他端口</li></ol><h4 id="_3-组件启动失败-⚠️" tabindex="-1">3. 组件启动失败 ⚠️ <a class="header-anchor" href="#_3-组件启动失败-⚠️" aria-label="Permalink to &quot;3. 组件启动失败 ⚠️&quot;">​</a></h4><p><strong>问题</strong>: 某个组件启动失败</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>⚠️ 适配器启动失败</span></span></code></pre></div><p><strong>解决方案</strong>:</p><ol><li><strong>检查依赖</strong>: 确认 Python 环境和依赖包</li><li><strong>检查配置</strong>: 验证配置文件正确性</li><li><strong>查看日志</strong>: 检查组件日志文件</li><li><strong>重新安装</strong>: 必要时重新安装组件</li></ol><h4 id="_4-进程管理问题-🔄" tabindex="-1">4. 进程管理问题 🔄 <a class="header-anchor" href="#_4-进程管理问题-🔄" aria-label="Permalink to &quot;4. 进程管理问题 🔄&quot;">​</a></h4><p><strong>问题</strong>: 进程无法停止</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span>❌ 停止进程失败</span></span></code></pre></div><p><strong>解决方案</strong>:</p><ol><li><strong>使用任务管理器</strong>: 手动结束进程</li><li><strong>重启程序</strong>: 重启 MaiCore Start</li><li><strong>强制终止</strong>: 使用任务管理器强制结束</li></ol><h3 id="高级故障排除" tabindex="-1">高级故障排除 <a class="header-anchor" href="#高级故障排除" aria-label="Permalink to &quot;高级故障排除&quot;">​</a></h3><h4 id="_1-配置文件损坏-🗂️" tabindex="-1">1. 配置文件损坏 🗂️ <a class="header-anchor" href="#_1-配置文件损坏-🗂️" aria-label="Permalink to &quot;1. 配置文件损坏 🗂️&quot;">​</a></h4><p><strong>检测</strong>: 程序启动时提示配置损坏</p><p><strong>修复</strong>:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 程序会自动修复损坏的配置</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">def</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _validate_and_repair_serials</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(self) -&gt; </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;&quot;&quot;验证并修复绝对序列号&quot;&quot;&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    repaired </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> False</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # 重新分配序列号</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    for</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i, (name, config) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">in</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> enumerate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(config_items):</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">        self</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.config[</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;configurations&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">][name][</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;absolute_serial_number&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">] </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> i </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> repaired</span></span></code></pre></div><h4 id="_2-端口管理器异常-🔌" tabindex="-1">2. 端口管理器异常 🔌 <a class="header-anchor" href="#_2-端口管理器异常-🔌" aria-label="Permalink to &quot;2. 端口管理器异常 🔌&quot;">​</a></h4><p><strong>检测</strong>: 端口分配失败</p><p><strong>解决方案</strong>:</p><ol><li><strong>重启端口管理器</strong>: 重启程序重置端口状态</li><li><strong>手动释放端口</strong>: 结束占用端口的进程</li><li><strong>扩展端口范围</strong>: 修改端口范围配置</li></ol><h4 id="_3-多开实例冲突-🔀" tabindex="-1">3. 多开实例冲突 🔀 <a class="header-anchor" href="#_3-多开实例冲突-🔀" aria-label="Permalink to &quot;3. 多开实例冲突 🔀&quot;">​</a></h4><p><strong>检测</strong>: 多开实例无法启动</p><p><strong>解决方案</strong>:</p><ol><li><strong>检查端口分配</strong>: 确认端口分配正确</li><li><strong>验证配置继承</strong>: 检查基础配置是否有效</li><li><strong>清理实例状态</strong>: 删除并重新创建实例</li></ol><h2 id="📞-获取帮助" tabindex="-1">📞 获取帮助 <a class="header-anchor" href="#📞-获取帮助" aria-label="Permalink to &quot;📞 获取帮助&quot;">​</a></h2><h3 id="官方资源" tabindex="-1">官方资源 <a class="header-anchor" href="#官方资源" aria-label="Permalink to &quot;官方资源&quot;">​</a></h3><!----><!----><h3 id="社区支持" tabindex="-1">社区支持 <a class="header-anchor" href="#社区支持" aria-label="Permalink to &quot;社区支持&quot;">​</a></h3><ul><li><strong>QQ技术群</strong>: 搜索相关技术交流群</li><li><strong>论坛讨论</strong>: 参与技术讨论和经验分享</li><li><strong>在线文档</strong>: 查看详细的在线文档</li></ul><h3 id="问题反馈" tabindex="-1">问题反馈 <a class="header-anchor" href="#问题反馈" aria-label="Permalink to &quot;问题反馈&quot;">​</a></h3><p>如果您遇到启动问题，请提供以下信息：</p><ul><li><strong>错误信息</strong>: 完整的错误提示</li><li><strong>系统环境</strong>: Windows版本、Python版本等</li><li><strong>操作步骤</strong>: 详细的操作过程</li><li><strong>日志文件</strong>: 相关的日志内容</li></ul><h2 id="📄-更新日志" tabindex="-1">📄 更新日志 <a class="header-anchor" href="#📄-更新日志" aria-label="Permalink to &quot;📄 更新日志&quot;">​</a></h2><h3 id="v4-1-2-beta" tabindex="-1">v4.1.2-beta <a class="header-anchor" href="#v4-1-2-beta" aria-label="Permalink to &quot;v4.1.2-beta&quot;">​</a></h3><ul><li>✨ 全新启动系统</li><li>🔧 优化配置集机制</li><li>📊 增强进程监控</li><li>🔀 完善多开功能</li><li>🐛 修复已知问题</li></ul><h3 id="v4-1-1" tabindex="-1">v4.1.1 <a class="header-anchor" href="#v4-1-1" aria-label="Permalink to &quot;v4.1.1&quot;">​</a></h3><ul><li>🚀 提升启动速度</li><li>💾 改进配置管理</li><li>🔒 增强稳定性</li></ul><hr><p><strong>感谢使用 MaiCore Start 启动系统！</strong></p><p>通过配置集机制、进程监控机制和实例多开机制，程序为用户提供了强大而灵活的 Bot 管理体验。如果您觉得这个启动系统有帮助，请给项目点个星⭐！</p><h2 id="top" tabindex="-1"><a class="VPNolebaseInlinePreviewLink" relative href="#📋-目录" data-v-7fde401a><!--[-->TOP<!--]--><!----></a> <a class="header-anchor" href="#top" aria-label="Permalink to &quot;[TOP](#📋-目录)&quot;">​</a></h2><!--[--><!----><div class="bg-$vp-custom-block-details-bg mt-6 vp-nolebase-git-changelog vp-nolebase-git-changelog-history vp-nolebase-git-changelog-history-list vp-nolebase-git-changelog-history-container" rounded-lg p-4 data-v-9cc63e9c><label cursor-pointer data-v-9cc63e9c><div class="vp-nolebase-git-changelog-title flex select-none items-center justify-between" transition="color ease-in-out" text="&lt;sm:xs" duration-200 data-v-9cc63e9c><span class="vp-nolebase-git-changelog-last-edited-title inline-flex items-center gap-3" data-v-9cc63e9c><div class="i-octicon:history-16" data-v-9cc63e9c></div><span data-v-9cc63e9c>最后编辑于 大约 1 个月前</span></span><div class="i-octicon:sort-desc-16" ml-auto mr-4 cursor-pointer data-v-9cc63e9c></div><span class="vp-nolebase-git-changelog-view-full-history-title inline-flex cursor-pointer items-center gap-3" data-v-9cc63e9c><span class="&lt;sm:hidden" data-v-9cc63e9c>查看完整历史</span><svg class="rotate-0 i-octicon:chevron-down-16" transition="transform ease-in-out" duration-200 data-v-9cc63e9c></svg></span></div></label><div style="display:none;" class="grid grid-cols-[30px_auto] mt-3 gap-1.5 children:my-auto -ml-1.5" text="&lt;sm:xs" data-v-9cc63e9c><!--[--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-0e4a2b5f></div><div flex gap-1 align-baseline data-v-0e4a2b5f><a href="https://github.com/MaiCore-Start/MCStart-Docs/commit/f7f276a79d483366c06b3a1bcd03eb098e8f0a3c" target="_blank" class="no-icon" data-v-0e4a2b5f><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-0e4a2b5f>f7f276a</code></a><span data-v-0e4a2b5f>-</span><span data-v-0e4a2b5f><span class="text-sm &lt;sm:text-xs" data-v-0e4a2b5f>挪动位置</span><span class="my-1 ml-3 gap-1" data-v-0e4a2b5f><!--[--><!--[--><img src="https://gravatar.com/avatar/0e929583353711cabe46f8721e7e80b352013d70702cbd3123bbfe579e09ebe5?d=retro" alt="The avatar of contributor named as xiaoCZX" class="vp-nolebase-git-changelog-commit-avatar inline-block h-6 w-6 rounded-full v-middle" data-v-0e4a2b5f><!--]--><!--]--></span><!----></span></div><!--]--><!--]--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-0e4a2b5f></div><div flex gap-1 align-baseline data-v-0e4a2b5f><a href="https://github.com/MaiCore-Start/MCStart-Docs/commit/bd42c97bfb50c85c97c3d27eea09d5604cc38a65" target="_blank" class="no-icon" data-v-0e4a2b5f><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-0e4a2b5f>bd42c97</code></a><span data-v-0e4a2b5f>-</span><span data-v-0e4a2b5f><span class="text-sm &lt;sm:text-xs" data-v-0e4a2b5f>完善</span><span class="my-1 ml-3 gap-1" data-v-0e4a2b5f><!--[--><!--[--><img src="https://gravatar.com/avatar/0e929583353711cabe46f8721e7e80b352013d70702cbd3123bbfe579e09ebe5?d=retro" alt="The avatar of contributor named as xiaoCZX" class="vp-nolebase-git-changelog-commit-avatar inline-block h-6 w-6 rounded-full v-middle" data-v-0e4a2b5f><!--]--><!--]--></span><!----></span></div><!--]--><!--]--><!--[--><!--[--><div class="i-octicon:git-commit-16 m-auto rotate-90 transform op-30" data-v-0e4a2b5f></div><div flex gap-1 align-baseline data-v-0e4a2b5f><a href="https://github.com/MaiCore-Start/MCStart-Docs/commit/a66c97da0fbd5597376e7fa834c2033e65a7593e" target="_blank" class="no-icon" data-v-0e4a2b5f><code class="text-xs text-$vp-c-brand-1 hover:text-$vp-c-brand-1" transition="color ease-in-out" duration-200 data-v-0e4a2b5f>a66c97d</code></a><span data-v-0e4a2b5f>-</span><span data-v-0e4a2b5f><span class="text-sm &lt;sm:text-xs" data-v-0e4a2b5f>删掉没用的，更新部署教程</span><span class="my-1 ml-3 gap-1" data-v-0e4a2b5f><!--[--><!--[--><img src="https://gravatar.com/avatar/0e929583353711cabe46f8721e7e80b352013d70702cbd3123bbfe579e09ebe5?d=retro" alt="The avatar of contributor named as xiaoCZX" class="vp-nolebase-git-changelog-commit-avatar inline-block h-6 w-6 rounded-full v-middle" data-v-0e4a2b5f><!--]--><!--]--></span><!----></span></div><!--]--><!--]--><!--]--></div></div><!--]--></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><div class="edit-link" data-v-e257564d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/MaiCore-Start/MCStart-Docs/edit/main/src/use/startup.md" target="_blank" rel="noreferrer" data-v-e257564d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-e257564d></span> 在 GitHub 上编辑此页面<!--]--></a></div><div class="last-updated" data-v-e257564d><p class="VPLastUpdated" data-v-e257564d data-v-e98dd255>最后更新于: <time datetime="2025-12-22T14:31:36.000Z" data-v-e98dd255></time></p></div></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/use/deployment" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>上一页</span><span class="title" data-v-e257564d>实例部署</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/use/FAQ" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>下一页</span><span class="title" data-v-e257564d>FAQ</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!----><!--]--></div></div>
    
    
  </body>
</html>